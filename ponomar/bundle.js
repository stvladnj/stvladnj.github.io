var app=function(e,t){"use strict";function n(){}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;const o=e=>e;function r(e,t){for(const n in t)e[n]=t[n];return e}function a(e){return e()}function i(){return Object.create(null)}function s(e){e.forEach(a)}function l(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function d(e,t,n){if(e){const o=u(e,t,n);return e[0](o)}}function u(e,t,n){return e[1]?r({},r(t.$$scope.ctx,e[1](n?n(t):{}))):t.$$scope.ctx}function h(e,t,n,o){return e[1]?r({},r(t.$$scope.changed||{},e[1](o?o(n):{}))):t.$$scope.changed||{}}function g(e){return null==e?"":e}const f=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m="undefined"!=typeof window;let p=m?()=>window.performance.now():()=>Date.now(),y=m?e=>requestAnimationFrame(e):n;const b=new Set;let v,k=!1;function $(){b.forEach(e=>{e[0](p())||(b.delete(e),e[1]())}),(k=b.size>0)&&y($)}function M(e){let t;return k||(k=!0,y($)),{promise:new Promise(n=>{b.add(t=[e,n])}),abort(){b.delete(t)}}}function I(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function D(){return S(" ")}function T(){return S("")}function O(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function E(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function F(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:n[o]&&n[o].set?e[o]=t[o]:E(e,o,t[o])}function J(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function j(e,t,n){e.classList[n?"add":"remove"](t)}function L(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}class H{constructor(e,t=null){this.e=_("div"),this.a=t,this.u(e)}m(e,t=null){for(let n=0;n<this.n.length;n+=1)w(e,this.n[n],t);this.t=e}u(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}p(e){this.d(),this.u(e),this.m(this.t,this.a)}d(){this.n.forEach(C)}}let P,R=0,z={};function N(e,t,n,o,r,a,i,s=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*a(e);c+=100*e+`%{${i(o,1-o)}}\n`}const d=c+`100% {${i(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${s}`;if(!z[u]){if(!v){const e=_("style");document.head.appendChild(e),v=e.sheet}z[u]=!0,v.insertRule(`@keyframes ${u} ${d}`,v.cssRules.length)}const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${u} ${o}ms linear ${r}ms 1 both`,R+=1,u}function A(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--R&&y(()=>{if(R)return;let e=v.cssRules.length;for(;e--;)v.deleteRule(e);z={}})}function Y(e){P=e}function W(){if(!P)throw new Error("Function called outside component initialization");return P}function q(e){W().$$.on_mount.push(e)}function G(){const e=W();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=L(t,n);o.slice().forEach(t=>{t.call(e,r)})}}}const K=[],U=[],V=[],X=[],Z=Promise.resolve();let Q,ee=!1;function te(){ee||(ee=!0,Z.then(re))}function ne(e){V.push(e)}function oe(e){X.push(e)}function re(){const e=new Set;do{for(;K.length;){const e=K.shift();Y(e),ae(e.$$)}for(;U.length;)U.pop()();for(let t=0;t<V.length;t+=1){const n=V[t];e.has(n)||(n(),e.add(n))}V.length=0}while(K.length);for(;X.length;)X.pop()();ee=!1}function ae(e){null!==e.fragment&&(e.update(e.dirty),s(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(ne))}function ie(){return Q||(Q=Promise.resolve()).then(()=>{Q=null}),Q}function se(e,t,n){e.dispatchEvent(L(`${t?"intro":"outro"}${n}`))}const le=new Set;let ce;function de(){ce={r:0,c:[],p:ce}}function ue(){ce.r||s(ce.c),ce=ce.p}function he(e,t){e&&e.i&&(le.delete(e),e.i(t))}function ge(e,t,n,o){if(e&&e.o){if(le.has(e))return;le.add(e),ce.c.push(()=>{le.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const fe={duration:0};function me(e,t,r,a){let i=t(e,r),c=a?0:1,d=null,u=null,h=null;function g(){h&&A(e,h)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(t){const{delay:r=0,duration:a=300,easing:l=o,tick:m=n,css:y}=i||fe,b={start:p()+r,b:t};t||(b.group=ce,ce.r+=1),d?u=b:(y&&(g(),h=N(e,c,t,a,r,l,y)),t&&m(0,1),d=f(b,a),ne(()=>se(e,t,"start")),M(t=>{if(u&&t>u.start&&(d=f(u,a),u=null,se(e,d.b,"start"),y&&(g(),h=N(e,c,d.b,d.duration,0,l,i.css))),d)if(t>=d.end)m(c=d.b,1-c),se(e,d.b,"end"),u||(d.b?g():--d.group.r||s(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;c=d.a+d.d*l(e/d.duration),m(c,1-c)}return!(!d&&!u)}))}return{run(e){l(i)?ie().then(()=>{i=i(),m(e)}):m(e)},end(){g(),d=u=null}}}function pe(e,t){const n=t.token={};function o(e,o,a,i){if(t.token!==n)return;t.resolved=a&&{[a]:i};const s=r(r({},t.ctx),t.resolved),l=e&&(t.current=e)(s);let c=!1;t.block&&(t.blocks?t.blocks.forEach((e,n)=>{n!==o&&e&&(de(),ge(e,1,1,()=>{t.blocks[n]=null}),ue())}):t.block.d(1),l.c(),he(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[o]=l),c&&re()}if((a=e)&&"object"==typeof a&&"function"==typeof a.then){const n=W();if(e.then(e=>{Y(n),o(t.then,1,t.value,e),Y(null)},e=>{Y(n),o(t.catch,2,t.error,e),Y(null)}),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved={[t.value]:e}}var a}const ye="undefined"!=typeof window?window:global;function be(e,t){ge(e,1,1,()=>{t.delete(e.key)})}function ve(e,t){const n={},o={},r={$$scope:1};let a=e.length;for(;a--;){const i=e[a],s=t[a];if(s){for(const e in i)e in s||(o[e]=1);for(const e in s)r[e]||(n[e]=s[e],r[e]=1);e[a]=s}else for(const e in i)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function ke(e,t,n){f(e.$$.props,t)&&(t=e.$$.props[t]||t,e.$$.bound[t]=n,n(e.$$.ctx[t]))}function $e(e){e&&e.c()}function Me(e,t,n){const{fragment:o,on_mount:r,on_destroy:i,after_update:c}=e.$$;o&&o.m(t,n),ne(()=>{const t=r.map(a).filter(l);i?i.push(...t):s(t),e.$$.on_mount=[]}),c.forEach(ne)}function Ie(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function we(e,t,o,r,a,l){const c=P;Y(e);const d=t.props||{},u=e.$$={fragment:null,ctx:null,props:l,update:n,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:i(),dirty:null};let h=!1;var g;u.ctx=o?o(e,d,(t,n,o=n)=>(u.ctx&&a(u.ctx[t],u.ctx[t]=o)&&(u.bound[t]&&u.bound[t](o),h&&function(e,t){e.$$.dirty||(K.push(e),te(),e.$$.dirty=i()),e.$$.dirty[t]=!0}(e,t)),n)):d,u.update(),h=!0,s(u.before_update),u.fragment=!!r&&r(u.ctx),t.target&&(t.hydrate?u.fragment&&u.fragment.l((g=t.target,Array.from(g.childNodes))):u.fragment&&u.fragment.c(),t.intro&&he(e.$$.fragment),Me(e,t.target,t.anchor),re()),Y(c)}class Ce{$destroy(){Ie(this,1),this.$destroy=n}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function xe(e,t,n,o,r){const a=Oe(function(e){return Oe(818.9874+.985647352*e)}(e)+180+t),[i,s,l]=function(e){const[t,n]=function(e){const t=Oe(356.047+.9856002585*e),n=282.9404+470935e-10*e,o=.016709-1.151e-9*e,r=t+o*_e*Se(t)*(1+o*De(t)),a=De(r)-o,i=Math.sqrt(1-o*o)*Se(r),s=Math.sqrt(a*a+i*i);let l=Te(i,a)+n;l>=360&&(l-=360);return[s,l]}(e);let o=t*De(n),r=t*Se(n);const a=23.4393-3.563e-7*e;let i=r*Se(a);const s=Te(r*=De(a),o),l=Te(i,Math.sqrt(o*o+r*r));return[s,l,t]}(e),c=12-((d=a-i)-360*Math.floor(d/360+.5))/15;var d;r&&(o-=.2666/l);const u=(Se(o)-Se(n)*Se(s))/(De(n)*De(s));let h;return u>=1?(console.warn("Sun never rises!"),h=0):u<=-1?(console.warn("Sun never sets!"),h=12):h=function(e){return Math.acos(e)*_e}(u)/15,[c-h,c+h]}const _e=180/Math.PI;function Se(e){return Math.sin(e/_e)}function De(e){return Math.cos(e/_e)}function Te(e,t){return Math.atan2(e,t)*_e}function Oe(e){return e-360*Math.floor(e/360)}const Ee={default:{altit:-35/60,upperLimb:!0},civil:{altit:-6,upperLimb:!1},nautical:{altit:-12,upperLimb:!1},amature:{altit:-15,upperLimb:!1},astronomical:{altit:-18,upperLimb:!1}};function Fe(e){for(;e<0;)e+=24;for(;e>=24;)e-=24;const t=Math.floor(e);return{hour:t,minute:Math.floor(60*(e-t))}}function Je({hour:e,minute:t}){const n=e=>e<10?"0"+e.toString():e.toString();return n(e)+":"+n(t)}const Be=[1582,10,15],je=[1582,10,5];function Le(e,t){t=Object.assign({fromJulianDate:!0},t);let[n,o,r]=e;if(o<1||o>12)throw new Error("bad month value: "+o);if(r<1||r>31)throw new Error("bad day value: "+o);!t.fromJulianDate&&e<Be&&(e>je&&([n,o,r]=je),t.fromJulianDate=!0);const a=Math.floor((14-o)/12),i=n+4800-a,s=o+12*a-3;let l=r+Math.floor((153*s+2)/5)+365*i+Math.floor(i/4)-32083;return t.fromJulianDate||(l-=Math.floor(i/100),l+=Math.floor(i/400),l+=38),l}function He(e,t){let n=e+1401;(t=Object.assign({julian:!0},t)).julian||(n+=Math.floor(3*Math.floor((4*e+274277)/146097)/4)-38);let o=4*n+3,r=5*Math.floor(o%1461/4)+2,a=Math.floor(r%153/5)+1,i=(Math.floor(r/153)+2)%12+1;return[Math.floor(o/1461)-4716+Math.floor((14-i)/12),i,a]}class Pe{constructor({year:e,month:t,day:n}){if(void 0===e)throw new Error("bad year value: "+e);if(void 0===t||t<1||t>12)throw new Error("bad month value: "+t);if(void 0===n||n<1||n>31)throw new Error("bad day value: "+n);this.jday=Le([e,t,n]),[this.year,this.month,this.day]=[e,t,n]}static fromJulianDay(e){const[t,n,o]=He(e);return new this({year:t,month:n,day:o})}static fromGregorian({month:e,day:t,year:n}){var o;return[n,e,t]=(o=[n,e,t])<Be?o>je?je:o:He(Le(o,{fromJulianDate:!1}),{julian:!0}),new this({year:n,month:e,day:t})}get dayOfWeek(){return(this.jday+1)%7}get dayOfYear(){const e=(this.jday+32083+1460)%1461+1;return 1461===e?366:(e+59+364)%365}add(e){return Pe.fromJulianDay(this.jday+e)}daysSince(e){return this.jday-e.jday}toGregorian(){const[e,t,n]=He(this.jday,{julian:!1});return{year:e,month:t,day:n}}getSunriseSunset(e,t,n){return function(e,t,n,o){const{observation:r,tzoffset:a}=Object.assign({observation:"default",tzoffset:0},o);let i,s;if("string"==typeof r){if(void 0===Ee[r])throw new Error('Unrecognized observation type. Expect one of: "default", "civil", "nautical", "amature", or "astronomical".\nAlternatively, you can pass an object with "altit" and "upperLimb" keys to set custom observation parameters.');({altit:i,upperLimb:s}=Ee[r])}else({altit:i,upperLimb:s}=r);const l=e-2451544+.5-t/360;let[c,d]=xe(l,t,n,i,s);return[Je(Fe(c+a)),Je(Fe(d+a))]}(this.jday,e,t,n)}}function Re(e){if(e<313)throw new Error("year is before 312AD!");return(e-312+14)%15+1}function ze(e){return(e+20+27)%28+1}function Ne(e){return(e-2+18)%19+1}function Ae(e){const t=(e+20)%28;let n=t+Math.floor(t/4);return n=(n+6)%7+1}function Ye(e){const t=(e+1)%19*11%30;return 0===t?29:t}function We(e){return(51-Ye(e))%30}function qe(e){const t=(19*(e%19)+15)%30,n=(2*(e%4)+4*(e%7)-t+34)%7,o=Math.floor((t+n+114)/31);return new Pe({day:(t+n+114)%31+1,month:o,year:e})}const Ge=["А","Б","В","Г","Д","Е","Ж","Ѕ","З","И","І","К","Л","М","Н","О","П","Р","С","Т","Ꙋ","Ф","Х","Ѿ","Ц","Ч","Ш","Щ","Ъ","Ы","Ь","Ѣ","Ю","Ѫ","Ѧ"];function Ke(e){const t=qe(e),n=new Pe({year:e,month:3,day:22});return Ge[t.jday-n.jday]}function Ue(e){return{pascha:qe(e),indiction:Re(e),solarCycle:ze(e),lunarCycle:Ne(e),concurrent:Ae(e),foundation:Ye(e),epacta:We(e),keyOfBoundaries:Ke(e)}}function Ve(e,t){const n=Object.keys(t);return Function.apply(null,[...n,"return ("+e+");"]).apply(null,n.map(e=>t[e]))}function Xe(e,t){if(!e)throw new Error("Assertion failed: "+JSON.stringify(t))}const Ze="enter",Qe="exit",et="text",tt="pi",nt="comment";new DOMParser,new XMLSerializer;function ot(e){if(!e)return;const t=(new DOMParser).parseFromString(e,"application/xml").documentElement;if("parsererror"===t.nodeName)throw new Error("Error parsing text");return t}function*rt(e){yield{type:Ze,tag:at(e.namespaceURI,e.nodeName),attrib:it(e)};for(const t of e.childNodes)3===t.nodeType?yield{type:et,text:t.textContent}:1===t.nodeType?yield*rt(t):7===t.nodeType?yield{type:tt,target:t.target,text:t.data}:8===t.nodeType&&(yield{type:nt,text:t.data});yield{type:Qe}}function at(e,t){if(e){const n=t.split(":");return"{"+e+"}"+n[n.length-1]}return t}function it(e){const t={};for(var n=0;n<e.attributes.length;n++){const o=e.attributes[n];"xmlns"===o.name||o.name.startsWith("xmlns:")||(t[at(o.namespaceURI,o.name)]=o.value)}return t}function*st(e,t){const n=ot(e),o=[];let r=!1;for(const e of rt(n))if(e.type===Ze){if(r){o.push(!1);continue}if(void 0!==e.attrib.Cmd){if(!(void 0===t||Ve(e.attrib.Cmd,t))){r=!0,o.push(!0);continue}}o.push(!1),yield e}else if(e.type===Qe){if(o.pop()){r=!1;continue}r||(yield e)}else r||(yield e)}function*lt(e,t,n){for(const o of st(e,n))if(o.type===Ze&&(Xe("SAINT"===o.tag||"DAY"===o.tag,o),"SAINT"===o.tag)){Xe(void 0!==o.attrib.CId,o);const e=void 0===o.attrib.Tone?null:void 0===n?o.attrib.Tone:Ve(o.attrib.Tone,n);yield{cid:o.attrib.CId,src:t,menologion:o.attrib.Src||"",type:e}}}const ct=["VESPERS","MATINS","LITURGY","SEXTE","PRIMES","TERCE","NONE"];function dt(e,t){const n={},o={info:null,life:null,name:null,ref:null};let r,a=!1;for(const[i,s]of function*(e){const t=[];for(const n of e)if(n.type===Ze)t.push(n),yield[n,void 0];else if(n.type===Qe)yield[n,t.pop()];else if(n.type===et)yield[n,void 0];else if(n.type===tt)yield[n,void 0];else{if(n.type!==nt)throw new Error("Unexpected event "+n);yield[n,void 0]}}(st(e,t)))if(i.type===Ze)if("NAME"===i.tag)o.name?o.name={...o.name,...i.attrib}:o.name={...i.attrib},delete o.name.Cmd;else if("INFO"===i.tag)o.info?o.info={...o.info,...i.attrib}:o.info={...i.attrib};else if("REF"===i.tag)void 0===i.attrib.Type&&(o.ref=i.attrib.CId);else if("SERVICE"===i.tag)o.type=i.attrib.Type||null,void 0!==t&&(t.dRank=+o.type);else if("SCRIPTURE"===i.tag){if(void 0!==r){const e={effWeek:i.attrib.EffWeek||null,pericope:i.attrib.Pericope||null,reading:i.attrib.Reading,type:i.attrib.Type||null};void 0===n[r]&&(n[r]=[]),n[r].push(e)}}else"LIFE"===i.tag?(o.life={...i.attrib,Text:""},delete o.life.Cmd,a=!0):ct.includes(i.tag)&&"primes"===(r=i.tag.toLowerCase())&&(r="prime");else i.type===Qe?"LIFE"===s.tag?a=!1:ct.includes(s.tag)&&(r=void 0):i.type===et&&a&&(o.life.Text=o.life.Text+i.text.replace(/\r/g,""));return 0===Object.keys(n).length?[o,void 0]:[o,n]}class ut{constructor(e,t){this.db=e,this.date=t;const n=this.date.year,o=Ue(n).pascha,r=Ue(n+1).pascha,a=Ue(n-1).pascha,i=this.date.daysSince(o),s=this.date.daysSince(a),l={dow:this.date.dayOfWeek,doy:this.date.dayOfYear,nday:i,ndayP:s,ndayF:this.date.daysSince(r),Year:this.date.year,GS:1};let c;c=i>=-70&&i<0?this.db.triodion(-i):i<-70?this.db.pentecostarion(s+1):this.db.pentecostarion(i+1),this.saints=[],this.saints.push(...lt(c,"pentecostarion",l)),Xe(this.saints.length>0),this.tone=this.saints.reduce((e,t)=>null!==t.type?+t.type:e,0),0===this.tone&&(this.tone=8),c=this.db.menaion(this.date.month,this.date.day),this.saints.push(...lt(c,"menaion",l));for(const e of this.saints){e.info=null,e.life=null,e.name=null,e.ref=null;for(const t of this.db.lives(e.cid)){const[n,o]=dt(t,{...l,dRank:+e.type});for(const t of Object.keys(n))"name"===t||"info"===t?null!==n[t]&&(e[t]?e[t]={...e[t],...n[t]}:e[t]=n[t]):e[t]=n[t],null!==n[t]&&("name"!==t&&"info"!==t||!e[t]?e[t]=n[t]:e[t]={...e[t],...n[t]});if(void 0!==o)if(void 0===e.readings)e.readings=o;else for(const t of Object.keys(o))void 0===e.readings[t]?e.readings[t]=o[t]:e.readings[t].push(...o[t])}}this.dayRank=this.saints.reduce((e,t)=>null===t.type?e:Math.max(e,+t.type),-1),l.dRank=this.dayRank,c=this.db.fasting();for(const e of function*(e,t){for(const n of st(e,t))n.type===Ze&&(Xe("FASTING"===n.tag||"PERIOD"===n.tag||"RULE"===n.tag,n),Xe(void 0===n.attrib.Tone,n),"RULE"===n.tag&&(yield n.attrib.Case))}(c,l))this.fastingCode=e;const d=this.saints.reduce((e,t)=>!!e||void 0!==t.readings&&void 0!==t.readings.liturgy,!1);this.commands=[],d&&(c=this.db.divineLiturgy(),this.commands.push(...function*(e,t){for(const n of st(e,t))n.type===Ze&&(Xe("COMMAND"===n.tag||"DATA"===n.tag,n),"COMMAND"===n.tag&&(yield{name:n.attrib.Name,value:n.attrib.Value,comment:n.attrib.Comment}))}(c,l))),this.bible=function(e){const t={};let n;for(const o of rt(ot(e)))o.type===Ze&&(Xe(["BMLFILE","BIBLE","BOOK","INFO"].indexOf(o.tag)>=0,o),"BIBLE"===o.tag?(n={id:o.attrib.Id,name:o.attrib.Name,books:{}},t[o.attrib.Id]=n):"INFO"===o.tag?n.info=o.attrib:"BOOK"===o.tag&&(n.books[o.attrib.Id]=o.attrib));return t}(this.db.bible())}execCommand(e){for(const t of this.saints)if("pentecostarion"===t.src&&(+t.cid>=9e3&&+t.cid<=9315||+t.cid>=9849&&+t.cid<=9900)){const n=[];void 0!==t.readings&&void 0!==t.readings.liturgy&&n.push(...t.readings.liturgy),0===this._execCommand(n,e).length?t.readings&&t.readings.liturgy&&delete t.readings.liturgy:(t.readings||(t.readings={}),t.readings.liturgy=n)}}get dRank(){return this.saints.reduce((e,t)=>"menaion"!==t.src?e:null===t.type?e:+t.type>e?+t.type:e,-1)}_any(e,t){for(const n of this.commands)if(n.name===e&&Ve(n.value,t))return!0;return!1}_execCommand(e,t){const n=Ue(this.date.year).pascha,o=Ue(this.date.year+1).pascha,r=Ue(this.date.year-1).pascha,a={dRank:t,dow:this.date.dayOfWeek,doy:this.date.dayOfYear,nday:this.date.daysSince(n),ndayP:this.date.daysSince(r),ndayF:this.date.daysSince(o)};for(const t of this.commands)if("Transfer"===t.name&&!Ve(t.value,a))return e;for(const t of this.commands)if(Ve(t.value,a)&&("Suppress"===t.name||"Class3Transfers"===t.name))return e.length=0,e;if(this._any("TransferRulesB",a)){const t=this.date.add(1),a=new ut(this.db,t),i={dRank:a.dRank,dow:t.dayOfWeek,doy:t.dayOfYear,nday:t.daysSince(n),ndayP:t.daysSince(r),ndayF:t.daysSince(o),GS:1};if(this._any("Class3Transfers",i))for(const t of a.saints)"pentecostarion"===t.src&&void 0!==t.readings&&void 0!==t.readings.liturgy&&e.push(...t.readings.liturgy)}if(this._any("TransferRulesF",a)){const t=this.date.add(-1),a=new ut(this.db,t),i={dRank:a.dRank,dow:t.dayOfWeek,doy:t.dayOfYear,nday:t.daysSince(n),ndayP:t.daysSince(r),ndayF:t.daysSince(o),GS:1};if(this._any("Class3Transfers",i))for(const t of a.saints)"pentecostarion"===t.src&&void 0!==t.readings&&void 0!==t.readings.liturgy&&e.push(...t.readings.liturgy)}return e}}class ht{constructor(e){this._lang,this.engine=e}lang(e){return this._lang=e,this}_findBottomUp(e){if(void 0===this._lang)throw new Error("lang() not set");const t=this._lang.split("/");for(let n=t.length;n>=0;n--){const o=[...t.slice(0,n),e].join("/");if(this.engine.has(o))return o}throw new Error("Failed to locate "+e)}*_findTopDown(e){if(void 0===this._lang)throw new Error("lang() not set");const t=this._lang.split("/");for(let n=0;n<=t.length;n++){const o=[...t.slice(0,n),e].join("/");this.engine.has(o)&&(yield o)}}_read(e){const t=this._findBottomUp(e);return this.engine.get(t)}*_readTopDown(e){for(const t of this._findTopDown(e))yield this.engine.get(t)}triodion(e){return this._read(`xml/triodion/${gt(e)}.xml`)}pentecostarion(e){return this._read(`xml/pentecostarion/${gt(e)}.xml`)}menaion(e,t){return this._read(`xml/${gt(e)}/${gt(t)}.xml`)}*lives(e){for(const t of this._readTopDown(`xml/lives/${gt(e)}.xml`))yield t}fasting(){return this._read("xml/Commands/Fasting.xml")}divineLiturgy(){return this._read("xml/Commands/DivineLiturgy.xml")}bible(){return this._read("xml/bible.xml")}icons(e,t){if(void 0===t){if(void 0===this._lang)throw new Error("lang() not set");t=[this._lang]}const n=[];for(const o of t){const t=`${o}/icons/${e}`;this.engine.has(t)&&n.push(...this.engine.list(t))}return n}}const gt=e=>e<10?"0"+e:""+e;class ft{constructor(e){this.db=e}static async load(e){await fetch(e);const t=await requiest.json();return new ft(t)}has(e){return void 0!==this.db[e]}get(e){return this.db[e]}*list(e){yield*this.db[e]}}class mt extends ht{constructor(e){super(new ft(e))}}const pt=(e,t,n)=>{let o=new Date(t,e,1);o.setDate(o.getDate()-o.getDay());let r=11===e?0:e+1,a=[];for(;o.getMonth()!==r||0!==o.getDay()||6!==a.length;){0===o.getDay()&&a.unshift({days:[],id:`${t}${e}${t}${a.length}`});const r=Object.assign({partOfMonth:o.getMonth()===e,date:new Date(o)},n(o));a[0].days.push(r),o.setDate(o.getDate()+1)}return a.reverse(),{month:e,year:t,weeks:a}},yt=(e,t,n)=>{let o=new Date;return o.setHours(0,0,0,0),r=>({selectable:r>=e&&r<=t&&(!n||n(r)),isToday:r.getTime()===o.getTime()})};const bt=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();function vt(e){const t=e-1;return t*t*t+1}function kt(e,{delay:t=0,duration:n=400,easing:r=o}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>`opacity: ${e*a}`}}function $t(e,{delay:t=0,duration:n=400,easing:o=vt,x:r=0,y:a=0,opacity:i=0}){const s=getComputedStyle(e),l=+s.opacity,c="none"===s.transform?"":s.transform,d=l*(1-i);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*r}px, ${(1-e)*a}px);\n\t\t\topacity: ${l-d*t}`}}function Mt(e,t,n){const o=Object.create(e);return o.day=t[n],o}function It(e){let t,n,o,r,a,i=e.day.date.getDate()+"";function s(...t){return e.click_handler(e,...t)}return{c(){t=_("div"),n=_("button"),o=S(i),r=D(),E(n,"class","day--label svelte-1f2gkwh"),E(n,"type","button"),j(n,"selected",bt(e.day.date,e.selected)),j(n,"highlighted",bt(e.day.date,e.highlighted)),j(n,"shake-date",e.shouldShakeDate&&bt(e.day.date,e.shouldShakeDate)),j(n,"disabled",!e.day.selectable),E(t,"class","day svelte-1f2gkwh"),j(t,"outside-month",!e.day.partOfMonth),j(t,"is-today",e.day.isToday),j(t,"is-disabled",!e.day.selectable),a=O(n,"click",s)},m(e,a){w(e,t,a),I(t,n),I(n,o),I(t,r)},p(r,a){e=a,r.days&&i!==(i=e.day.date.getDate()+"")&&J(o,i),(r.areDatesEquivalent||r.days||r.selected)&&j(n,"selected",bt(e.day.date,e.selected)),(r.areDatesEquivalent||r.days||r.highlighted)&&j(n,"highlighted",bt(e.day.date,e.highlighted)),(r.shouldShakeDate||r.areDatesEquivalent||r.days)&&j(n,"shake-date",e.shouldShakeDate&&bt(e.day.date,e.shouldShakeDate)),r.days&&j(n,"disabled",!e.day.selectable),r.days&&j(t,"outside-month",!e.day.partOfMonth),r.days&&j(t,"is-today",e.day.isToday),r.days&&j(t,"is-disabled",!e.day.selectable)},d(e){e&&C(t),a()}}}function wt(e){let t,r,a,i,c=e.days,d=[];for(let t=0;t<c.length;t+=1)d[t]=It(Mt(e,c,t));return{c(){t=_("div");for(let e=0;e<d.length;e+=1)d[e].c();E(t,"class","week svelte-1f2gkwh")},m(e,n){w(e,t,n);for(let e=0;e<d.length;e+=1)d[e].m(t,null);i=!0},p(e,n){if(e.days||e.areDatesEquivalent||e.selected||e.highlighted||e.shouldShakeDate||e.dispatch){let o;for(c=n.days,o=0;o<c.length;o+=1){const r=Mt(n,c,o);d[o]?d[o].p(e,r):(d[o]=It(r),d[o].c(),d[o].m(t,null))}for(;o<d.length;o+=1)d[o].d(1);d.length=c.length}},i(s){i||(ne(()=>{a&&a.end(1),r||(r=function(e,t,r){let a,i,s=t(e,r),c=!1,d=0;function u(){a&&A(e,a)}function h(){const{delay:t=0,duration:r=300,easing:l=o,tick:h=n,css:g}=s||fe;g&&(a=N(e,0,1,r,t,l,g,d++)),h(0,1);const f=p()+t,m=f+r;i&&i.abort(),c=!0,ne(()=>se(e,!0,"start")),i=M(t=>{if(c){if(t>=m)return h(1,0),se(e,!0,"end"),u(),c=!1;if(t>=f){const e=l((t-f)/r);h(e,1-e)}}return c})}let g=!1;return{start(){g||(A(e),l(s)?(s=s(),ie().then(h)):h())},invalidate(){g=!1},end(){c&&(u(),c=!1)}}}(t,$t,{x:50*e.direction,duration:180,delay:90})),r.start()}),i=!0)},o(e){r&&r.invalidate(),a=function(e,t,r){let a,i=t(e,r),c=!0;const d=ce;function u(){const{delay:t=0,duration:r=300,easing:l=o,tick:u=n,css:h}=i||fe;h&&(a=N(e,1,0,r,t,l,h));const g=p()+t,f=g+r;ne(()=>se(e,!1,"start")),M(t=>{if(c){if(t>=f)return u(0,1),se(e,!1,"end"),--d.r||s(d.c),!1;if(t>=g){const e=l((t-g)/r);u(1-e,e)}}return c})}return d.r+=1,l(i)?ie().then(()=>{i=i(),u()}):u(),{end(t){t&&i.tick&&i.tick(1,0),c&&(a&&A(e,a),c=!1)}}}(t,kt,{duration:180}),i=!1},d(e){e&&C(t),x(d,e),e&&a&&a.end()}}}function Ct(e,t,n){const o=G();let{days:r}=t,{selected:a}=t,{start:i}=t,{end:s}=t,{highlighted:l}=t,{shouldShakeDate:c}=t,{direction:d}=t;return e.$set=(e=>{"days"in e&&n("days",r=e.days),"selected"in e&&n("selected",a=e.selected),"start"in e&&n("start",i=e.start),"end"in e&&n("end",s=e.end),"highlighted"in e&&n("highlighted",l=e.highlighted),"shouldShakeDate"in e&&n("shouldShakeDate",c=e.shouldShakeDate),"direction"in e&&n("direction",d=e.direction)}),{dispatch:o,days:r,selected:a,start:i,end:s,highlighted:l,shouldShakeDate:c,direction:d,click_handler:({day:e})=>o("dateSelected",e.date)}}class xt extends Ce{constructor(e){super(),we(this,e,Ct,wt,c,{days:0,selected:0,start:0,end:0,highlighted:0,shouldShakeDate:0,direction:0})}}function _t(e,t,n){const o=Object.create(e);return o.week=t[n],o}function St(e,t){let n,o;const r=new xt({props:{days:t.week.days,selected:t.selected,start:t.start,end:t.end,highlighted:t.highlighted,shouldShakeDate:t.shouldShakeDate,direction:t.direction}});return r.$on("dateSelected",t.dateSelected_handler),{key:e,first:null,c(){n=T(),$e(r.$$.fragment),this.first=n},m(e,t){w(e,n,t),Me(r,e,t),o=!0},p(e,t){const n={};e.visibleMonth&&(n.days=t.week.days),e.selected&&(n.selected=t.selected),e.start&&(n.start=t.start),e.end&&(n.end=t.end),e.highlighted&&(n.highlighted=t.highlighted),e.shouldShakeDate&&(n.shouldShakeDate=t.shouldShakeDate),e.direction&&(n.direction=t.direction),r.$set(n)},i(e){o||(he(r.$$.fragment,e),o=!0)},o(e){ge(r.$$.fragment,e),o=!1},d(e){e&&C(n),Ie(r,e)}}}function Dt(e){let t,n,o=[],r=new Map,a=e.visibleMonth.weeks;const i=e=>e.week.id;for(let t=0;t<a.length;t+=1){let n=_t(e,a,t),s=i(n);r.set(s,o[t]=St(s,n))}return{c(){t=_("div");for(let e=0;e<o.length;e+=1)o[e].c();E(t,"class","month-container svelte-ny3kda")},m(e,r){w(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){const a=n.visibleMonth.weeks;de(),o=function(e,t,n,o,r,a,i,s,l,c,d,u){let h=e.length,g=a.length,f=h;const m={};for(;f--;)m[e[f].key]=f;const p=[],y=new Map,b=new Map;for(f=g;f--;){const e=u(r,a,f),s=n(e);let l=i.get(s);l?o&&l.p(t,e):(l=c(s,e)).c(),y.set(s,p[f]=l),s in m&&b.set(s,Math.abs(f-m[s]))}const v=new Set,k=new Set;function $(e){he(e,1),e.m(s,d),i.set(e.key,e),d=e.first,g--}for(;h&&g;){const t=p[g-1],n=e[h-1],o=t.key,r=n.key;t===n?(d=t.first,h--,g--):y.has(r)?!i.has(o)||v.has(o)?$(t):k.has(r)?h--:b.get(o)>b.get(r)?(k.add(o),$(t)):(v.add(r),h--):(l(n,i),h--)}for(;h--;){const t=e[h];y.has(t.key)||l(t,i)}for(;g;)$(p[g-1]);return p}(o,e,i,1,n,a,r,t,be,St,null,_t),ue()},i(e){if(!n){for(let e=0;e<a.length;e+=1)he(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)ge(o[e]);n=!1},d(e){e&&C(t);for(let e=0;e<o.length;e+=1)o[e].d()}}}function Tt(e,t,n){let o,{id:r}=t,{visibleMonth:a}=t,{selected:i}=t,{start:s}=t,{end:l}=t,{highlighted:c}=t,{shouldShakeDate:d}=t,u=r;return e.$set=(e=>{"id"in e&&n("id",r=e.id),"visibleMonth"in e&&n("visibleMonth",a=e.visibleMonth),"selected"in e&&n("selected",i=e.selected),"start"in e&&n("start",s=e.start),"end"in e&&n("end",l=e.end),"highlighted"in e&&n("highlighted",c=e.highlighted),"shouldShakeDate"in e&&n("shouldShakeDate",d=e.shouldShakeDate)}),e.$$.update=((e={lastId:1,id:1})=>{(e.lastId||e.id)&&(n("direction",o=u<r?1:-1),n("lastId",u=r))}),{id:r,visibleMonth:a,selected:i,start:s,end:l,highlighted:c,shouldShakeDate:d,direction:o,dateSelected_handler:function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}(e,t)}}}class Ot extends Ce{constructor(e){super(),we(this,e,Tt,Dt,c,{id:0,visibleMonth:0,selected:0,start:0,end:0,highlighted:0,shouldShakeDate:0})}}const Et=[{name:"January",abbrev:"Jan"},{name:"February",abbrev:"Feb"},{name:"March",abbrev:"Mar"},{name:"April",abbrev:"Apr"},{name:"May",abbrev:"May"},{name:"June",abbrev:"Jun"},{name:"July",abbrev:"Jul"},{name:"August",abbrev:"Aug"},{name:"September",abbrev:"Sep"},{name:"October",abbrev:"Oct"},{name:"November",abbrev:"Nov"},{name:"December",abbrev:"Dec"}],Ft=[{name:"Sunday",abbrev:"Sun"},{name:"Monday",abbrev:"Mon"},{name:"Tuesday",abbrev:"Tue"},{name:"Wednesday",abbrev:"Wed"},{name:"Thursday",abbrev:"Thu"},{name:"Friday",abbrev:"Fri"},{name:"Saturday",abbrev:"Sat"}],{Object:Jt}=ye;function Bt(e,t,n){const o=Jt.create(e);return o.monthDefinition=t[n],o.index=n,o}function jt(e){let t,n,o,r,a,i=e.monthDefinition.abbrev+"";function s(...t){return e.click_handler_2(e,...t)}return{c(){t=_("div"),n=_("span"),o=S(i),r=D(),E(n,"class","svelte-1dqf106"),E(t,"class","month-selector--month svelte-1dqf106"),j(t,"selected",e.index===e.month),j(t,"selectable",e.monthDefinition.selectable),a=O(t,"click",s)},m(e,a){w(e,t,a),I(t,n),I(n,o),I(t,r)},p(n,r){e=r,n.availableMonths&&i!==(i=e.monthDefinition.abbrev+"")&&J(o,i),n.month&&j(t,"selected",e.index===e.month),n.availableMonths&&j(t,"selectable",e.monthDefinition.selectable)},d(e){e&&C(t),a()}}}function Lt(e){let t,o,r,a,i,l,c,d,u,h,g,f,m,p=Et[e.month].name+"",y=e.availableMonths,b=[];for(let t=0;t<y.length;t+=1)b[t]=jt(Bt(e,y,t));return{c(){t=_("div"),o=_("div"),(r=_("div")).innerHTML='<i class="arrow left svelte-1dqf106"></i>',a=D(),i=_("div"),l=S(p),c=D(),d=S(e.year),u=D(),(h=_("div")).innerHTML='<i class="arrow right svelte-1dqf106"></i>',g=D(),f=_("div");for(let e=0;e<b.length;e+=1)b[e].c();E(r,"class","control svelte-1dqf106"),j(r,"enabled",e.canDecrementMonth),E(i,"class","label svelte-1dqf106"),E(h,"class","control svelte-1dqf106"),j(h,"enabled",e.canIncrementMonth),E(o,"class","heading-section svelte-1dqf106"),E(f,"class","month-selector svelte-1dqf106"),j(f,"open",e.monthSelectorOpen),E(t,"class","title"),m=[O(r,"click",e.click_handler),O(i,"click",e.toggleMonthSelectorOpen),O(h,"click",e.click_handler_1)]},m(e,n){w(e,t,n),I(t,o),I(o,r),I(o,a),I(o,i),I(i,l),I(i,c),I(i,d),I(o,u),I(o,h),I(t,g),I(t,f);for(let e=0;e<b.length;e+=1)b[e].m(f,null)},p(e,t){if(e.canDecrementMonth&&j(r,"enabled",t.canDecrementMonth),e.month&&p!==(p=Et[t.month].name+"")&&J(l,p),e.year&&J(d,t.year),e.canIncrementMonth&&j(h,"enabled",t.canIncrementMonth),e.month||e.availableMonths||e.monthSelected){let n;for(y=t.availableMonths,n=0;n<y.length;n+=1){const o=Bt(t,y,n);b[n]?b[n].p(e,o):(b[n]=jt(o),b[n].c(),b[n].m(f,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=y.length}e.monthSelectorOpen&&j(f,"open",t.monthSelectorOpen)},i:n,o:n,d(e){e&&C(t),x(b,e),s(m)}}}function Ht(e,t,n){const o=G();let r,{month:a}=t,{start:i}=t,{end:s}=t,{year:l}=t,{canIncrementMonth:c}=t,{canDecrementMonth:d}=t,u=!1;function h(){n("monthSelectorOpen",u=!u)}function g(e,t){e.stopPropagation(),o("monthSelected",t),h()}return e.$set=(e=>{"month"in e&&n("month",a=e.month),"start"in e&&n("start",i=e.start),"end"in e&&n("end",s=e.end),"year"in e&&n("year",l=e.year),"canIncrementMonth"in e&&n("canIncrementMonth",c=e.canIncrementMonth),"canDecrementMonth"in e&&n("canDecrementMonth",d=e.canDecrementMonth)}),e.$$.update=((e={start:1,year:1,end:1})=>{if(e.start||e.year||e.end){let e=i.getFullYear()===l,t=s.getFullYear()===l;n("availableMonths",r=Et.map((n,o)=>Object.assign({},n,{selectable:!e&&!t||(!e||o>=i.getMonth())&&(!t||o<=s.getMonth())})))}}),{dispatch:o,month:a,start:i,end:s,year:l,canIncrementMonth:c,canDecrementMonth:d,monthSelectorOpen:u,availableMonths:r,toggleMonthSelectorOpen:h,monthSelected:g,click_handler:()=>o("incrementMonth",-1),click_handler_1:()=>o("incrementMonth",1),click_handler_2:({index:e},t)=>g(t,e)}}class Pt extends Ce{constructor(e){super(),we(this,e,Ht,Lt,c,{month:0,start:0,end:0,year:0,canIncrementMonth:0,canDecrementMonth:0})}}const{window:Rt}=ye,zt=()=>({}),Nt=()=>({}),At=()=>({}),Yt=()=>({});function Wt(e){let t,n,o,r,a,i,l,c;ne(e.onwindowresize);const g=e.$$slots.trigger,f=d(g,e,Yt),m=e.$$slots.contents,p=d(m,e,Nt);return{c(){t=_("div"),n=_("div"),f&&f.c(),o=D(),r=_("div"),a=_("div"),i=_("div"),p&&p.c(),E(n,"class","trigger"),E(i,"class","contents-inner svelte-mc1z8c"),E(a,"class","contents svelte-mc1z8c"),E(r,"class","contents-wrapper svelte-mc1z8c"),B(r,"transform","translate(-50%,-50%) translate("+e.translateX+"px, "+e.translateY+"px)"),j(r,"visible",e.open),j(r,"shrink",e.shrink),E(t,"class","sc-popover svelte-mc1z8c"),c=[O(Rt,"resize",e.onwindowresize),O(n,"click",e.doOpen)]},m(s,c){w(s,t,c),I(t,n),f&&f.m(n,null),e.div0_binding(n),I(t,o),I(t,r),I(r,a),I(a,i),p&&p.m(i,null),e.div2_binding(a),e.div3_binding(r),e.div4_binding(t),l=!0},p(e,t){f&&f.p&&e.$$scope&&f.p(h(g,t,e,At),u(g,t,Yt)),p&&p.p&&e.$$scope&&p.p(h(m,t,e,zt),u(m,t,Nt)),(!l||e.translateX||e.translateY)&&B(r,"transform","translate(-50%,-50%) translate("+t.translateX+"px, "+t.translateY+"px)"),e.open&&j(r,"visible",t.open),e.shrink&&j(r,"shrink",t.shrink)},i(e){l||(he(f,e),he(p,e),l=!0)},o(e){ge(f,e),ge(p,e),l=!1},d(n){n&&C(t),f&&f.d(n),e.div0_binding(null),p&&p.d(n),e.div2_binding(null),e.div3_binding(null),e.div4_binding(null),s(c)}}}function qt(e,t,n){const o=G();let r,a,i,s,l,c=(e,t,n)=>{e.addEventListener(t,function o(){n.apply(this,arguments),e.removeEventListener(t,o)})},d=0,u=0,{open:h=!1}=t,{shrink:g}=t,{trigger:f}=t;const m=()=>{n("shrink",g=!0),c(s,"animationend",()=>{n("shrink",g=!1),n("open",h=!1),o("closed")})};function p(e){if(!h)return;let t=e.target;do{if(t===r)return}while(t=t.parentNode);m()}q(()=>{if(document.addEventListener("click",p),f)return i.appendChild(f.parentNode.removeChild(f)),()=>{document.removeEventListener("click",p)}});const y=async()=>{h||n("open",h=!0),await(te(),Z);let e=l.getBoundingClientRect();return{top:e.top+-1*d,bottom:window.innerHeight-e.bottom+d,left:e.left+-1*u,right:document.body.clientWidth-e.right+u}};let{$$slots:b={},$$scope:v}=t;return e.$set=(e=>{"open"in e&&n("open",h=e.open),"shrink"in e&&n("shrink",g=e.shrink),"trigger"in e&&n("trigger",f=e.trigger),"$$scope"in e&&n("$$scope",v=e.$$scope)}),{popover:r,w:a,triggerContainer:i,contentsAnimated:s,contentsWrapper:l,translateY:d,translateX:u,open:h,shrink:g,trigger:f,close:m,doOpen:async()=>{const{x:e,y:t}=await(async()=>{let e,t,n=await y();return t=a<480?n.bottom:n.top<0?Math.abs(n.top):n.bottom<0?n.bottom:0,{x:e=n.left<0?Math.abs(n.left):n.right<0?n.right:0,y:t}})();n("translateX",u=e),n("translateY",d=t),n("open",h=!0),o("opened")},onwindowresize:function(){n("w",a=Rt.innerWidth)},div0_binding:function(e){U[e?"unshift":"push"](()=>{n("triggerContainer",i=e)})},div2_binding:function(e){U[e?"unshift":"push"](()=>{n("contentsAnimated",s=e)})},div3_binding:function(e){U[e?"unshift":"push"](()=>{n("contentsWrapper",l=e)})},div4_binding:function(e){U[e?"unshift":"push"](()=>{n("popover",r=e)})},$$slots:b,$$scope:v}}class Gt extends Ce{constructor(e){super(),we(this,e,qt,Wt,c,{open:0,shrink:0,trigger:0,close:0})}get close(){return this.$$.ctx.close}}const Kt=(e,t,n)=>e.replace(new RegExp("#{"+t+"}","g"),n),Ut=function(e,t,n){if(e=e.toString(),void 0===t)return e;if(e.length==t)return e;if(n=void 0!==n&&n,e.length<t)for(;t-e.length>0;)e="0"+e;else e.length>t&&(e=n?e.substring(e.length-t):e.substring(0,t));return e};let Vt={daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"]};var Xt=[{key:"d",method:function(e){return Ut(e.getDate(),2)}},{key:"D",method:function(e){return Ut(Vt.daysOfWeek[e.getDay()],3)}},{key:"j",method:function(e){return e.getDate()}},{key:"l",method:function(e){return Vt.daysOfWeek[e.getDay()]}},{key:"F",method:function(e){return Vt.monthsOfYear[e.getMonth()]}},{key:"m",method:function(e){return Ut(e.getMonth()+1,2)}},{key:"M",method:function(e){return Ut(Vt.monthsOfYear[e.getMonth()],3)}},{key:"n",method:function(e){return e.getMonth()+1}},{key:"Y",method:function(e){return e.getFullYear()}},{key:"y",method:function(e){return Ut(e.getFullYear(),2,!0)}}],Zt=[{key:"a",method:function(e){return e.getHours()>11?"pm":"am"}},{key:"A",method:function(e){return e.getHours()>11?"PM":"AM"}},{key:"g",method:function(e){return e.getHours()%12||12}},{key:"G",method:function(e){return e.getHours()}},{key:"h",method:function(e){return Ut(e.getHours()%12||12,2)}},{key:"H",method:function(e){return Ut(e.getHours(),2)}},{key:"i",method:function(e){return Ut(e.getMinutes(),2)}},{key:"s",method:function(e){return Ut(e.getSeconds(),2)}}];const Qt=(e,t="#{m}/#{d}/#{Y}")=>(Xt.forEach(n=>{-1!=t.indexOf(`#{${n.key}}`)&&(t=Kt(t,n.key,n.method(e)))}),Zt.forEach(n=>{-1!=t.indexOf(`#{${n.key}}`)&&(t=Kt(t,n.key,n.method(e)))}),t),en={left:37,up:38,right:39,down:40,pgup:33,pgdown:34,enter:13,escape:27,tab:9},tn=Object.keys(en).map(e=>en[e]);function nn(e,t,n){const o=Object.create(e);return o.day=t[n],o}function on(e){let t,n;return{c(){t=_("button"),n=S(e.formattedSelected),E(t,"class","calendar-button svelte-1lorc63"),E(t,"type","button")},m(e,o){w(e,t,o),I(t,n)},p(e,t){e.formattedSelected&&J(n,t.formattedSelected)},d(e){e&&C(t)}}}function rn(e){let t,n;const o=e.$$slots.default,r=d(o,e,null);let a=!e.trigger&&on(e);return{c(){t=_("div"),r||a&&a.c(),r&&r.c(),E(t,"slot","trigger"),E(t,"class","svelte-1lorc63")},m(e,o){w(e,t,o),r||a&&a.m(t,null),r&&r.m(t,null),n=!0},p(e,n){r||(n.trigger?a&&(a.d(1),a=null):a?a.p(e,n):((a=on(n)).c(),a.m(t,null))),r&&r.p&&e.$$scope&&r.p(h(o,n,e,null),u(o,n,null))},i(e){n||(he(r,e),n=!0)},o(e){ge(r,e),n=!1},d(e){e&&C(t),r||a&&a.d(),r&&r.d(e)}}}function an(e){let t,o,r=e.day.abbrev+"";return{c(){t=_("span"),o=S(r),E(t,"class","svelte-1lorc63")},m(e,n){w(e,t,n),I(t,o)},p:n,d(e){e&&C(t)}}}function sn(e){let t,n,o,r,a,i;const s=new Pt({props:{month:e.month,year:e.year,start:e.start,end:e.end,canIncrementMonth:e.canIncrementMonth,canDecrementMonth:e.canDecrementMonth}});s.$on("monthSelected",e.monthSelected_handler),s.$on("incrementMonth",e.incrementMonth_handler);let l=Ft,c=[];for(let t=0;t<l.length;t+=1)c[t]=an(nn(e,l,t));const d=new Ot({props:{visibleMonth:e.visibleMonth,selected:e.selected,highlighted:e.highlighted,shouldShakeDate:e.shouldShakeDate,start:e.start,end:e.end,id:e.visibleMonthId}});return d.$on("dateSelected",e.dateSelected_handler),{c(){t=_("div"),n=_("div"),$e(s.$$.fragment),o=D(),r=_("div");for(let e=0;e<c.length;e+=1)c[e].c();a=D(),$e(d.$$.fragment),E(r,"class","legend svelte-1lorc63"),E(n,"class","calendar svelte-1lorc63"),E(t,"slot","contents"),E(t,"class","svelte-1lorc63")},m(e,l){w(e,t,l),I(t,n),Me(s,n,null),I(n,o),I(n,r);for(let e=0;e<c.length;e+=1)c[e].m(r,null);I(n,a),Me(d,n,null),i=!0},p(e,t){const n={};if(e.month&&(n.month=t.month),e.year&&(n.year=t.year),e.start&&(n.start=t.start),e.end&&(n.end=t.end),e.canIncrementMonth&&(n.canIncrementMonth=t.canIncrementMonth),e.canDecrementMonth&&(n.canDecrementMonth=t.canDecrementMonth),s.$set(n),e.dayDict){let n;for(l=Ft,n=0;n<l.length;n+=1){const o=nn(t,l,n);c[n]?c[n].p(e,o):(c[n]=an(o),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}const o={};e.visibleMonth&&(o.visibleMonth=t.visibleMonth),e.selected&&(o.selected=t.selected),e.highlighted&&(o.highlighted=t.highlighted),e.shouldShakeDate&&(o.shouldShakeDate=t.shouldShakeDate),e.start&&(o.start=t.start),e.end&&(o.end=t.end),e.visibleMonthId&&(o.id=t.visibleMonthId),d.$set(o)},i(e){i||(he(s.$$.fragment,e),he(d.$$.fragment,e),i=!0)},o(e){ge(s.$$.fragment,e),ge(d.$$.fragment,e),i=!1},d(e){e&&C(t),Ie(s),x(c,e),Ie(d)}}}function ln(e){let t;return{c(){t=D()},m(e,n){w(e,t,n)},p:n,i:n,o:n,d(e){e&&C(t)}}}function cn(e){let t,n,o,r;function a(t){e.popover_1_open_binding.call(null,t)}function i(t){e.popover_1_shrink_binding.call(null,t)}let s={trigger:e.trigger,$$slots:{default:[ln],contents:[sn],trigger:[rn]},$$scope:{ctx:e}};void 0!==e.isOpen&&(s.open=e.isOpen),void 0!==e.isClosing&&(s.shrink=e.isClosing);const l=new Gt({props:s});return e.popover_1_binding(l),U.push(()=>ke(l,"open",a)),U.push(()=>ke(l,"shrink",i)),l.$on("opened",e.registerOpen),l.$on("closed",e.registerClose),{c(){t=_("div"),$e(l.$$.fragment),E(t,"class","datepicker svelte-1lorc63"),B(t,"--button-background-color",e.buttonBackgroundColor),B(t,"--button-border-color",e.buttonBorderColor),B(t,"--button-text-color",e.buttonTextColor),B(t,"--highlight-color",e.highlightColor),B(t,"--day-background-color",e.dayBackgroundColor),B(t,"--day-text-color",e.dayTextColor),B(t,"--day-highlighted-background-color",e.dayHighlightedBackgroundColor),B(t,"--day-highlighted-text-color",e.dayHighlightedTextColor),j(t,"open",e.isOpen),j(t,"closing",e.isClosing)},m(e,n){w(e,t,n),Me(l,t,null),r=!0},p(e,a){const i={};e.trigger&&(i.trigger=a.trigger),(e.$$scope||e.visibleMonth||e.selected||e.highlighted||e.shouldShakeDate||e.start||e.end||e.visibleMonthId||e.month||e.year||e.canIncrementMonth||e.canDecrementMonth||e.trigger||e.formattedSelected)&&(i.$$scope={changed:e,ctx:a}),!n&&e.isOpen&&(n=!0,i.open=a.isOpen,oe(()=>n=!1)),!o&&e.isClosing&&(o=!0,i.shrink=a.isClosing,oe(()=>o=!1)),l.$set(i),r&&!e.buttonBackgroundColor||B(t,"--button-background-color",a.buttonBackgroundColor),r&&!e.buttonBorderColor||B(t,"--button-border-color",a.buttonBorderColor),r&&!e.buttonTextColor||B(t,"--button-text-color",a.buttonTextColor),r&&!e.highlightColor||B(t,"--highlight-color",a.highlightColor),r&&!e.dayBackgroundColor||B(t,"--day-background-color",a.dayBackgroundColor),r&&!e.dayTextColor||B(t,"--day-text-color",a.dayTextColor),r&&!e.dayHighlightedBackgroundColor||B(t,"--day-highlighted-background-color",a.dayHighlightedBackgroundColor),r&&!e.dayHighlightedTextColor||B(t,"--day-highlighted-text-color",a.dayHighlightedTextColor),e.isOpen&&j(t,"open",a.isOpen),e.isClosing&&j(t,"closing",a.isClosing)},i(e){r||(he(l.$$.fragment,e),r=!0)},o(e){ge(l.$$.fragment,e),r=!1},d(n){n&&C(t),e.popover_1_binding(null),Ie(l)}}}function dn(e,t,n){const o=G(),r=new Date;let a,i,{format:s="#{m}/#{d}/#{Y}"}=t,{start:l=new Date(1987,9,29)}=t,{end:c=new Date(2020,9,29)}=t,{selected:d=r}=t,{dateChosen:u=!1}=t,{trigger:h=null}=t,{selectableCallback:g=null}=t,f=r,m=!1,p=r.getMonth(),y=r.getFullYear(),b=!1,v=!1;r.setHours(0,0,0,0);let k=0,{formattedSelected:$}=t;function M(e){n("month",p=e)}function I(e,t){if(1===e&&!K)return;if(-1===e&&!V)return;let o=new Date(y,p,1);o.setMonth(o.getMonth()+e),n("month",p=o.getMonth()),n("year",y=o.getFullYear()),n("highlighted",f=new Date(y,p,t||1))}function w(e){return n("highlighted",f=new Date(f)),f.setDate(f.getDate()+e),e>0&&f>Y?I(1,f.getDate()):e<0&&f<W?I(-1,f.getDate()):f}function C(e){const t=function(e,t){for(let n=0;n<e.weeks.length;n+=1)for(let o=0;o<e.weeks[n].days.length;o+=1)if(bt(e.weeks[n].days[o].date,t))return e.weeks[n].days[o];return null}(N,e);return!!t&&t.selectable}function x(e){!function(e){h&&n("trigger",h.innerHTML=e,h)}(e)}function _(e){return C(e)?(T(),n("selected",d=e),n("dateChosen",u=!0),x($),o("dateSelected",{date:e})):(t=e,clearTimeout(i),n("shouldShakeDate",m=t),void(i=setTimeout(()=>{n("shouldShakeDate",m=!1)},700)));var t}function S(e){if(-1!==tn.indexOf(e.keyCode))switch(e.preventDefault(),e.keyCode){case en.left:w(-1);break;case en.up:w(-7);break;case en.right:w(1);break;case en.down:w(7);break;case en.pgup:I(-1);break;case en.pgdown:I(1);break;case en.escape:T();break;case en.enter:_(f)}}function D(){document.removeEventListener("keydown",S),o("close")}function T(){a.close(),D()}q(()=>{n("month",p=d.getMonth()),n("year",y=d.getFullYear())});let{buttonBackgroundColor:O="#fff"}=t,{buttonBorderColor:E="#eee"}=t,{buttonTextColor:F="#333"}=t,{highlightColor:J="#f7901e"}=t,{dayBackgroundColor:B="none"}=t,{dayTextColor:j="#4a4a4a"}=t,{dayHighlightedBackgroundColor:L="#efefef"}=t,{dayHighlightedTextColor:H="#4a4a4a"}=t,{$$slots:P={},$$scope:R}=t;let z,N,A,Y,W,K,V;return e.$set=(e=>{"format"in e&&n("format",s=e.format),"start"in e&&n("start",l=e.start),"end"in e&&n("end",c=e.end),"selected"in e&&n("selected",d=e.selected),"dateChosen"in e&&n("dateChosen",u=e.dateChosen),"trigger"in e&&n("trigger",h=e.trigger),"selectableCallback"in e&&n("selectableCallback",g=e.selectableCallback),"formattedSelected"in e&&n("formattedSelected",$=e.formattedSelected),"buttonBackgroundColor"in e&&n("buttonBackgroundColor",O=e.buttonBackgroundColor),"buttonBorderColor"in e&&n("buttonBorderColor",E=e.buttonBorderColor),"buttonTextColor"in e&&n("buttonTextColor",F=e.buttonTextColor),"highlightColor"in e&&n("highlightColor",J=e.highlightColor),"dayBackgroundColor"in e&&n("dayBackgroundColor",B=e.dayBackgroundColor),"dayTextColor"in e&&n("dayTextColor",j=e.dayTextColor),"dayHighlightedBackgroundColor"in e&&n("dayHighlightedBackgroundColor",L=e.dayHighlightedBackgroundColor),"dayHighlightedTextColor"in e&&n("dayHighlightedTextColor",H=e.dayHighlightedTextColor),"$$scope"in e&&n("$$scope",R=e.$$scope)}),e.$$.update=((e={start:1,end:1,selectableCallback:1,months:1,i:1,month:1,year:1,monthIndex:1,visibleMonth:1,format:1,selected:1})=>{if((e.start||e.end||e.selectableCallback)&&n("months",z=function(e,t,n=null){e.setHours(0,0,0,0),t.setHours(0,0,0,0);let o=new Date(t.getFullYear(),t.getMonth()+1,1),r=[],a=new Date(e.getFullYear(),e.getMonth(),1),i=yt(e,t,n);for(;a<o;)r.push(pt(a.getMonth(),a.getFullYear(),i)),a.setMonth(a.getMonth()+1);return r}(l,c,g)),e.months||e.month||e.year){n("monthIndex",k=0);for(let e=0;e<z.length;e+=1)z[e].month===p&&z[e].year===y&&n("monthIndex",k=e)}(e.months||e.monthIndex)&&n("visibleMonth",N=z[k]),(e.year||e.month)&&n("visibleMonthId",A=y+p/100),e.visibleMonth&&(Y=N.weeks[N.weeks.length-1].days[6].date),e.visibleMonth&&(W=N.weeks[0].days[0].date),(e.monthIndex||e.months)&&n("canIncrementMonth",K=k<z.length-1),e.monthIndex&&n("canDecrementMonth",V=k>0),(e.format||e.selected)&&n("formattedSelected",$="function"==typeof s?s(d):Qt(d,s))}),{popover:a,format:s,start:l,end:c,selected:d,dateChosen:u,trigger:h,selectableCallback:g,highlighted:f,shouldShakeDate:m,month:p,year:y,isOpen:b,isClosing:v,formattedSelected:$,changeMonth:M,incrementMonth:I,registerSelection:_,registerClose:D,registerOpen:function(){n("highlighted",f=new Date(d)),n("month",p=d.getMonth()),n("year",y=d.getFullYear()),document.addEventListener("keydown",S),o("open")},buttonBackgroundColor:O,buttonBorderColor:E,buttonTextColor:F,highlightColor:J,dayBackgroundColor:B,dayTextColor:j,dayHighlightedBackgroundColor:L,dayHighlightedTextColor:H,visibleMonth:N,visibleMonthId:A,canIncrementMonth:K,canDecrementMonth:V,monthSelected_handler:e=>M(e.detail),incrementMonth_handler:e=>I(e.detail),dateSelected_handler:e=>_(e.detail),popover_1_binding:function(e){U[e?"unshift":"push"](()=>{n("popover",a=e)})},popover_1_open_binding:function(e){n("isOpen",b=e)},popover_1_shrink_binding:function(e){n("isClosing",v=e)},$$slots:P,$$scope:R}}class un extends Ce{constructor(e){super(),we(this,e,dn,cn,c,{format:0,start:0,end:0,selected:0,dateChosen:0,trigger:0,selectableCallback:0,formattedSelected:0,buttonBackgroundColor:0,buttonBorderColor:0,buttonTextColor:0,highlightColor:0,dayBackgroundColor:0,dayTextColor:0,dayHighlightedBackgroundColor:0,dayHighlightedTextColor:0})}}const hn={Ponomar:{cu:"Смiре́нный понома́рь",ru:"Пономарь",en:"Ponomar"},fasting_0000000:{cu:"По́ст (ничего́ не ядим-с)",ru:"Пост (ничего не ядим-с)",en:"No food"},fasting_0000001:{cu:"Сухоя́дение"},fasting_0000111:{cu:"Вино и еле́й позволя́ются"},fasting_0011111:{cu:"Ры́ба, вино́, еле́й"},fasting_1111111:{cu:"Поста нетъ"},tone_1:{cu:"Гла́съ пе́рвый"},tone_2:{cu:"Гла́съ вторы́й"},tone_3:{cu:"Гла́съ тре́тий"},tone_4:{cu:"Гла́съ четве́ртый"},tone_5:{cu:"Гла́съ пя́тый"},tone_6:{cu:"Гла́съ шесты́й"},tone_7:{cu:"Гла́съ седьмы́й"},tone_8:{cu:"Гла́съ осьмы́й"},liturgy:{cu:"Боже́ственная литурги́я",ru:"Литургия",en:"Liturgy"},matins:{cu:"Утреня",ru:"Утреня",en:"Matins"},vespers:{cu:"Вече́рня",ru:"Вечерня",en:"Vespers"},none:{cu:"Ча́съ девя́тый"},prime:{cu:"Ча́съ пе́рвый"},terce:{cu:"Ча́съ тре́тий"},sexte:{cu:"Ча́съ шесты́й"},Acts:{},Baruch:{},Col:{},Dan:{},Deut:{},Eph:{},Ex:{},Ezek:{},Gal:{},Gen:{},Heb:{},"I Cor":{},"I Jn":{},"I Pet":{},"I Thess":{},"I Tim":{},"II Cor":{},"II Jn":{},"II Pet":{},"II Thess":{},"II Tim":{},"III Jn":{},"III Kings":{},"IV Kings":{},Isa:{},Jas:{},Jerem:{},Jn:{},Job:{},Joel:{},Jona:{},Josh:{},Jude:{},Judg:{},Lev:{},Lk:{},Mal:{},Mica:{},Mk:{},Mt:{},Num:{},Philemon:{},Philip:{},Prov:{},Rom:{},Tit:{},Wisd:{},Zech:{},Zeph:{}},gn={Gen:{cu:"Бытїѐ",ru:"Бытие",en:"Genesis"},Ex:{cu:"И҆схо́дъ",ru:"Исход",en:"Exodus"},Lev:{cu:"Леѵі́тъ",ru:"Левит",en:"Leviticus"},Num:{cu:"Чи́сла",ru:"Числа",en:"Numbers"},Deut:{cu:"Второзако́нїе",ru:"Второзаконие",en:"Deuteronomy"},Josh:{cu:"І҆исꙋ́са наѵи́на",ru:"Иисуса навина",en:"Joshua"},Judg:{cu:"Сꙋді́й і҆сра́илевыхъ",ru:"Судей израилевых",en:"Judges"},Ruth:{cu:"Рꙋ́ѳь",ru:"Руфь",en:"Ruth"},"I Kings":{cu:"а҃ ца́рствъ",ru:"1 царств",en:"I Kingdoms"},"II Kings":{cu:"в҃ ца́рствъ",ru:"2 царств",en:"II Kingdoms"},"III Kings":{cu:"г҃ ца́рствъ",ru:"3 царств",en:"III Kingdoms"},"IV Kings":{cu:"д҃ ца́рствъ",ru:"4 царств",en:"IV Kingdoms"},"I Paral":{cu:"а҃ паралипоме́нѡнъ",ru:"1 паралипоменон",en:"I Paralipomenon"},"II Paral":{cu:"в҃ паралипоме́нѡнъ",ru:"2 паралипоменон",en:"II Paralipomenon"},"I Esdra":{cu:"а҃ є҆́здры ",ru:"1 ездры ",en:"I Esdra"},Nehem:{cu:"Неемі́и",ru:"Неемии",en:"Nehemiah"},"II Esdra":{cu:"в҃ є҆́здры",ru:"2 ездры",en:"II Esdra"},Tobit:{cu:"Тѡві́т",ru:"Товит",en:"Tobit"},Judith:{cu:"І҆ꙋді́ѳ",ru:"Иудиф",en:"Judith"},Esther:{cu:"Є҆сѳи́рь",ru:"Есфирь",en:"Esther"},Job:{cu:"І҆́ѡвъ",ru:"Иов",en:"Job"},Psalm:{cu:"Ѱалти́рь",ru:"Псалтирь",en:"Psalm"},Prov:{cu:"При́тчей соломѡ́нихъ",ru:"Притчи",en:"Proverbs"},Eccles:{cu:"Є҆кклесїа́ст",ru:"Екклесиаст",en:"Ecclesiastes"},Song:{cu:"Пѣ́снь пѣ́сней",ru:"Песнь песней",en:"Song of Songs"},Wisd:{cu:"Премꙋ́дрости соломѡ́ни",ru:"Премудрости Соломона",en:"Wisdom of Solomon"},Sirach:{cu:"Сїрахъ",ru:"Сирах",en:"Sirach"},Isa:{cu:"И҆са́їи",ru:"Исаии",en:"Isaiah"},Jerem:{cu:"І҆еремі́и",ru:"Иеремии",en:"Jeremiah"},Lamen:{cu:"Пла́чь і҆еремі́евъ",ru:"Плачь Иеремии",en:"Lamentations"},Epistle:{cu:"Посла́нїе їеремі́ино",ru:"Послание Иеремии",en:"Epistle of Jeremiah"},Baruch:{cu:"Варꙋ́хъ",ru:"Варуха",en:"Baruch"},Ezek:{cu:"І҆езекі́илѧ",ru:"Иезекииля",en:"Ezekiel"},Dan:{cu:"Данїи́ла",ru:"Даниила",en:"Daniel"},Hos:{cu:"Ѡ҆сі́а",ru:"Осии",en:"Hosea"},Joel:{cu:"І҆ѡи́ль",ru:"Иоиля",en:"Joel"},Amos:{cu:"А҆мѡ́съ",ru:"Амоса",en:"Amos"},Obad:{cu:"А҆вді́й ",ru:"Авдия",en:"Obadiah"},Jona:{cu:"І҆ѡ́ны",ru:"Ионы",en:"Jonah"},Mica:{cu:"Мїхе́й",ru:"Михея",en:"Micah"},Nahum:{cu:"Наꙋ́мъ",ru:"Наума",en:"Nahum"},Habak:{cu:"А҆ввакꙋ́мъ",ru:"Аввакума",en:"Habakuk"},Zeph:{cu:"Софо́нїа",ru:"Софонии",en:"Zephaniah"},Hagg:{cu:"А҆гге́й",ru:"Аггея",en:"Haggai"},Zech:{cu:"Заха́рїа",ru:"Захарии",en:"Zechariah"},Mal:{cu:"Малахі́а",ru:"Малахии",en:"Malachi"},"I Macc":{cu:"а҃ маккавей́скаѧ",ru:"1 Маккавейская",en:"I Maccabees"},"II Macc":{cu:"в҃ маккавей́скаѧ",ru:"2 Маккавейская",en:"II Maccabees"},"III Macc":{cu:"г҃ маккавей́скаѧ",ru:"3 Маккавейская",en:"III Maccabees"},"III Esdra":{cu:"г҃ є҆́здры",ru:"3 Ездры",en:"III Esdra"},Mt:{cu:"Ѿ Матѳе́а",ru:"От Матфея",en:"Matthew"},Mk:{cu:"Ѿ Ма́рка",ru:"От Марка",en:"Mark"},Lk:{cu:"Ѿ лꙋкѝ",ru:"От Луки",en:"Luke"},Jn:{cu:"Ѿ і҆ѡа́нна",ru:"От Иоанна",en:"John"},Acts:{cu:"Дѣѧ̑нїѧ ст҃ы́хъ а҆пⷭ҇лъ",ru:"Деяния святых Апостолов",en:"Acts"},Jas:{cu:"І҆а́кѡвле",ru:"Иакова",en:"James"},"I Pet":{cu:"Пе́рвое петра̀",ru:"Первое Петра",en:"I Peter"},"II Pet":{cu:"Второ́е петра̀",ru:"Второе Петра",en:"II Peter"},"I Jn":{cu:"Пе́рвое і҆ѡа́нна",ru:"Первое Иоанна",en:"I John"},"II Jn":{cu:"Второ́е і҆ѡа́нна",ru:"Второе Иоанна",en:"II John"},"III Jn":{cu:"Тре́тїе і҆ѡа́нна",ru:"Третие Иоанна",en:"III John"},Jude:{cu:"І҆ꙋ́дино",ru:"Иуды",en:"Jude"},Rom:{cu:"Къ ри́млѧнѡмъ",ru:"К Римлянам",en:"Romans"},"I Cor":{cu:"Пе́рвое къ корі́нѳѧнѡмъ",ru:"Первое к Коринфянам",en:"I Corinthians"},"II Cor":{cu:"Второ́е къ корі́нѳѧнѡмъ",ru:"Второе к Коринфянам",en:"II Corinthians"},Gal:{cu:"Къ гала́тѡмъ",ru:"К Галатам",en:"Galatians"},Eph:{cu:"Ко є҆фесе́ємъ",ru:"К Ефесянам",en:"Ephesians"},Philip:{cu:"Къ фїлїпписі́ємъ",ru:"К Филиппийцам",en:"Philippians"},Col:{cu:"Къ колосса́ємъ  ",ru:"К Колоссянам",en:"Colossians"},"I Thess":{cu:"Пе́рвое къ солꙋ́нѧнѡмъ",ru:"Первое к Фессалоникийцам",en:"I Thessalonians"},"II Thess":{cu:"Второ́е къ солꙋ́нѧнѡмъ",ru:"Второе к Фессалоникийцам",en:"II Thessalonians"},"I Tim":{cu:"Пе́рвое къ тїмоѳе́ю ",ru:"Первое к Тимофею",en:"I Timothy"},"II Tim":{cu:"Второ́е къ тїмоѳе́ю",ru:"Второе к Тимофею",en:"II Timothy"},Tit:{cu:"Къ ті́тꙋ",ru:"К Титу",en:"Titus"},Philemon:{cu:"Къ фїлимо́нꙋ",ru:"К Филимону",en:"Philemon"},Heb:{cu:"Ко є҆вре́ємъ",ru:"К Евреям",en:"Hebrews"},Apoc:{cu:"А҆пока́лѷѱїсъ",ru:"Откровение",en:"Apocalypse"},Composite:{cu:"Composite",ru:"Composite",en:"Composite"}};function fn(e){return t=>{const n=/^(.+?)_(.+?)$/i.exec(t),[o,r,a]=n;return gn[r][e]+" "+a}}function mn(e){return t=>hn[t]&&hn[t][e]?hn[t][e]:"!!!***!!! "+t+" !!!***!!!"}function pn(e,t,n){const o=Object.create(e);return o.reading=t[n],o}function yn(e,t,n){const o=Object.create(e);return o.serviceType=t[n][0],o.readings=t[n][1],o}function bn(e,t,n){const o=Object.create(e);return o.saint=t[n],o}function vn(e){let t,o,r=e.error.message+"";return{c(){t=_("p"),o=S(r),B(t,"color","red")},m(e,n){w(e,t,n),I(t,o)},p(e,t){e.db&&r!==(r=t.error.message+"")&&J(o,r)},i:n,o:n,d(e){e&&C(t)}}}function kn(e){let t,n,o,r,a,i,l,c,d,u,h,g,f,m,p,y,b,v,k,$,M,x,S,T,F,J,B,L;function H(t){e.datepicker_formattedSelected_binding.call(null,t)}let P={dateChosen:!0,$$slots:{default:[$n]},$$scope:{ctx:e}};void 0!==e.dateFormatted&&(P.formattedSelected=e.dateFormatted);const R=new un({props:P});U.push(()=>ke(R,"formattedSelected",H));const z=[In,Mn],N=[];function A(e,t){return t.imgFlip?0:1}f=A(0,e),m=N[f]=z[f](e);let Y=e.p&&wn(e),W=e.p&&Cn(e);return{c(){t=_("div"),n=_("div"),o=_("div"),(r=_("button")).innerHTML='<i class="fas fa-arrow-circle-left"></i>',a=D(),$e(R.$$.fragment),l=D(),(c=_("button")).innerHTML='<i class="fas fa-arrow-circle-right"></i>',d=D(),u=_("div"),h=_("div"),g=_("figure"),m.c(),p=D(),y=_("div"),b=_("div"),v=_("div"),(k=_("button")).textContent="cu",$=D(),(M=_("button")).textContent="ru",x=D(),(S=_("button")).textContent="en",T=D(),Y&&Y.c(),F=D(),J=_("ul"),W&&W.c(),E(o,"class","button-group"),E(g,"class","crossfade svelte-3uz1mv"),E(h,"class","col-lg-12"),E(u,"class","row section svelte-3uz1mv"),E(n,"class","col-lg-4"),j(k,"primary","cux"==e.lang),j(M,"primary","rux"==e.lang),j(S,"primary","enx"==e.lang),E(v,"class","col-lg-12"),E(b,"class","row"),E(J,"class","svelte-3uz1mv"),E(y,"class","col-lg-8"),E(t,"class","row"),L=[O(r,"click",e.click_handler),O(c,"click",e.click_handler_1),O(k,"click",e.click_handler_2),O(M,"click",e.click_handler_3),O(S,"click",e.click_handler_4)]},m(e,i){w(e,t,i),I(t,n),I(n,o),I(o,r),I(o,a),Me(R,o,null),I(o,l),I(o,c),I(n,d),I(n,u),I(u,h),I(h,g),N[f].m(g,null),I(t,p),I(t,y),I(y,b),I(b,v),I(v,k),I(v,$),I(v,M),I(v,x),I(v,S),I(v,T),Y&&Y.m(v,null),I(y,F),I(y,J),W&&W.m(J,null),B=!0},p(e,t){const n={};(e.$$scope||e.dateFormatted)&&(n.$$scope={changed:e,ctx:t}),!i&&e.dateFormatted&&(i=!0,n.formattedSelected=t.dateFormatted,oe(()=>i=!1)),R.$set(n);let o=f;(f=A(0,t))===o?N[f].p(e,t):(de(),ge(N[o],1,1,()=>{N[o]=null}),ue(),(m=N[f])||(m=N[f]=z[f](t)).c(),he(m,1),m.m(g,null)),e.lang&&j(k,"primary","cux"==t.lang),e.lang&&j(M,"primary","rux"==t.lang),e.lang&&j(S,"primary","enx"==t.lang),t.p?Y?Y.p(e,t):((Y=wn(t)).c(),Y.m(v,null)):Y&&(Y.d(1),Y=null),t.p?W?W.p(e,t):((W=Cn(t)).c(),W.m(J,null)):W&&(W.d(1),W=null)},i(e){B||(he(R.$$.fragment,e),he(m),B=!0)},o(e){ge(R.$$.fragment,e),ge(m),B=!1},d(e){e&&C(t),Ie(R),N[f].d(),Y&&Y.d(),W&&W.d(),s(L)}}}function $n(e){let t,n;return{c(){t=_("button"),n=S(e.dateFormatted),E(t,"id","date-selector")},m(e,o){w(e,t,o),I(t,n)},p(e,t){e.dateFormatted&&J(n,t.dateFormatted)},d(e){e&&C(t)}}}function Mn(e){let t,n,o,a=[{class:"icon"},{alt:""},e.icon],i={};for(let e=0;e<a.length;e+=1)i=r(i,a[e]);return{c(){F(t=_("img"),i),j(t,"svelte-3uz1mv",!0)},m(e,n){w(e,t,n),o=!0},p(e,n){F(t,ve(a,[{class:"icon"},{alt:""},e.icon&&n.icon])),j(t,"svelte-3uz1mv",!0)},i(e){o||(ne(()=>{n||(n=me(t,kt,{},!0)),n.run(1)}),o=!0)},o(e){n||(n=me(t,kt,{},!1)),n.run(0),o=!1},d(e){e&&C(t),e&&n&&n.end()}}}function In(e){let t,n,o,a=[{class:"icon"},{alt:""},e.icon],i={};for(let e=0;e<a.length;e+=1)i=r(i,a[e]);return{c(){F(t=_("img"),i),j(t,"svelte-3uz1mv",!0)},m(e,n){w(e,t,n),o=!0},p(e,n){F(t,ve(a,[{class:"icon"},{alt:""},e.icon&&n.icon])),j(t,"svelte-3uz1mv",!0)},i(e){o||(ne(()=>{n||(n=me(t,kt,{},!0)),n.run(1)}),o=!0)},o(e){n||(n=me(t,kt,{},!1)),n.run(0),o=!1},d(e){e&&C(t),e&&n&&n.end()}}}function wn(e){let t,n,o,r,a,i,s,l=e.t(`fasting_${e.p.fastingCode}`)+"",c=e.t(`tone_${e.p.tone}`)+"";return{c(){t=_("p"),n=S(l),r=D(),a=_("p"),i=S(c),E(t,"class",o=g(e.cls)+" svelte-3uz1mv"),E(a,"class",s=g(e.cls)+" svelte-3uz1mv")},m(e,o){w(e,t,o),I(t,n),w(e,r,o),w(e,a,o),I(a,i)},p(e,r){(e.t||e.p)&&l!==(l=r.t(`fasting_${r.p.fastingCode}`)+"")&&J(n,l),e.cls&&o!==(o=g(r.cls)+" svelte-3uz1mv")&&E(t,"class",o),(e.t||e.p)&&c!==(c=r.t(`tone_${r.p.tone}`)+"")&&J(i,c),e.cls&&s!==(s=g(r.cls)+" svelte-3uz1mv")&&E(a,"class",s)},d(e){e&&C(t),e&&C(r),e&&C(a)}}}function Cn(e){let t,n=e.p.saints,o=[];for(let t=0;t<n.length;t+=1)o[t]=Sn(bn(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=T()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);w(e,t,n)},p(e,r){if(e.cls||e.activeReadings||e.p||e.r||e.t||e.formatName||e.getMarker){let a;for(n=r.p.saints,a=0;a<n.length;a+=1){const i=bn(r,n,a);o[a]?o[a].p(e,i):(o[a]=Sn(i),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(e){x(o,e),e&&C(t)}}}function xn(e){let t,n,o,r=e.r(e.reading.reading,e.reading.pericope)+"";return{c(){t=_("li"),n=S(r),E(t,"class",o=g(e.cls)+" svelte-3uz1mv")},m(e,o){w(e,t,o),I(t,n)},p(e,a){(e.r||e.p)&&r!==(r=a.r(a.reading.reading,a.reading.pericope)+"")&&J(n,r),e.cls&&o!==(o=g(a.cls)+" svelte-3uz1mv")&&E(t,"class",o)},d(e){e&&C(t)}}}function _n(e){let t,n,o,r,a,i,s,l,c=e.t(e.serviceType)+"",d=e.readings,u=[];for(let t=0;t<d.length;t+=1)u[t]=xn(pn(e,d,t));return{c(){t=_("li"),n=S(c),o=D(),r=_("ul");for(let e=0;e<u.length;e+=1)u[e].c();a=D(),i=_("ul"),s=D(),E(i,"class","svelte-3uz1mv"),E(r,"class","svelte-3uz1mv"),E(t,"class",l=g(e.cls)+" svelte-3uz1mv")},m(e,l){w(e,t,l),I(t,n),I(t,o),I(t,r);for(let e=0;e<u.length;e+=1)u[e].m(r,null);I(r,a),I(r,i),I(r,s)},p(e,o){if((e.t||e.p)&&c!==(c=o.t(o.serviceType)+"")&&J(n,c),e.cls||e.r||e.activeReadings||e.p){let t;for(d=o.readings,t=0;t<d.length;t+=1){const n=pn(o,d,t);u[t]?u[t].p(e,n):(u[t]=xn(n),u[t].c(),u[t].m(r,a))}for(;t<u.length;t+=1)u[t].d(1);u.length=d.length}e.cls&&l!==(l=g(o.cls)+" svelte-3uz1mv")&&E(t,"class",l)},d(e){e&&C(t),x(u,e)}}}function Sn(e){let t,n,o,r,a,i,s,l,c,d,u=Fn(e.saint.type).text+"",h=En(e.saint.name)+"",f=[...On(e.saint.readings)],m=[];for(let t=0;t<f.length;t+=1)m[t]=_n(yn(e,f,t));return{c(){t=_("li"),n=_("span"),o=S(u),a=D(),s=D(),l=_("ul");for(let e=0;e<m.length;e+=1)m[e].c();c=D(),E(n,"class",r=g(e.cls)+" svelte-3uz1mv"),j(n,"marker",!0),j(n,"red",Fn(e.saint.type).red),i=new H(h,s),E(l,"class","svelte-3uz1mv"),E(t,"class",d=g(e.cls)+" svelte-3uz1mv")},m(e,r){w(e,t,r),I(t,n),I(n,o),I(t,a),i.m(t),I(t,s),I(t,l);for(let e=0;e<m.length;e+=1)m[e].m(l,null);I(t,c)},p(e,a){if(e.p&&u!==(u=Fn(a.saint.type).text+"")&&J(o,u),e.cls&&r!==(r=g(a.cls)+" svelte-3uz1mv")&&E(n,"class",r),e.cls&&j(n,"marker",!0),(e.cls||e.getMarker||e.p)&&j(n,"red",Fn(a.saint.type).red),e.p&&h!==(h=En(a.saint.name)+"")&&i.p(h),e.cls||e.activeReadings||e.p||e.r||e.t){let t;for(f=[...On(a.saint.readings)],t=0;t<f.length;t+=1){const n=yn(a,f,t);m[t]?m[t].p(e,n):(m[t]=_n(n),m[t].c(),m[t].m(l,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=f.length}e.cls&&d!==(d=g(a.cls)+" svelte-3uz1mv")&&E(t,"class",d)},d(e){e&&C(t),x(m,e)}}}function Dn(e){let t,o,r,a=e.t("Loading...")+"";return{c(){t=_("div"),o=_("div"),r=S(a),E(o,"class","col-lg-12"),E(t,"class","row")},m(e,n){w(e,t,n),I(t,o),I(o,r)},p(e,t){e.t&&a!==(a=t.t("Loading...")+"")&&J(r,a)},i:n,o:n,d(e){e&&C(t)}}}function Tn(e){let t,n,o,a={ctx:e,current:null,token:null,pending:Dn,then:kn,catch:vn,value:"null",error:"error",blocks:[,,,]};return pe(n=e.db,a),{c(){t=_("div"),a.block.c(),E(t,"class","container")},m(e,n){w(e,t,n),a.block.m(t,a.anchor=null),a.mount=(()=>t),a.anchor=null,o=!0},p(t,o){e=o,a.ctx=e,t.db&&n!==(n=e.db)&&pe(n,a)||a.block.p(t,r(r({},e),a.resolved))},i(e){o||(he(a.block),o=!0)},o(e){for(let e=0;e<3;e+=1){ge(a.blocks[e])}o=!1},d(e){e&&C(t),a.block.d(),a.token=null,a=null}}}function*On(e){if(e)for(const t of["vespers","matins","prime","terce","sexte","liturgy","none"])void 0!==e[t]&&0!==e[t].length&&(yield[t,e[t]])}function En(e){return e?e.Nominative?e.Nominative:e.Short?e.short:"":""}function Fn(e){switch(+e){case 1:return{text:"✺",red:!1};case 2:return{text:"🕃",red:!1};case 3:return{text:"🕃",red:!0};case 4:return{text:"🕂",red:!0};case 5:return{text:"🕁",red:!0};case 6:case 7:case 8:return{text:"🕀",red:!0};default:return{text:"·",red:!1}}}function Jn(e,t,n){let{year:o,month:r,day:a}=function(){const e=new Date;return{year:e.getFullYear().toString(),month:e.getMonth()+1,day:e.getDate()}}(),i=Pe.fromGregorian({year:o,month:r,day:a}),s=`${r}/${a}/${o}`;function l(e){const{year:t,month:o,day:r}=i.add(e).toGregorian();n("dateFormatted",s=`${o}/${r}/${t}`)}let c="cu",d=mn("cu"),u=fn("cu");const h={cu:"cu",ru:"cu/ru",en:"en"};let g,f,m;const p=[{name:"default/1.jpeg",saint:{}},{name:"default/2.jpeg",saint:{}},{name:"default/3.jpeg",saint:{}}];let y={},b=!1;return e.$$.update=((e={dateFormatted:1,year:1,month:1,day:1,lang:1,db:1,date:1,p:1,imgFlip:1})=>{e.dateFormatted&&n("month",[r,a,o]=s.split("/").map(e=>+e),r,(n("day",a),n("dateFormatted",s)),(n("year",o),n("dateFormatted",s))),(e.year||e.month||e.day)&&n("date",i=Pe.fromGregorian({year:o,month:r,day:a})),e.lang&&n("t",d=mn(c)),e.lang&&n("r",u=fn(c)),e.lang&&(async()=>n("db",g=await async function(e){const t=await fetch("https://stvladnj.org/ponomar/db.json"),n=await t.json();return new mt(n).lang(h[e])}(c)))(),(e.db||e.date)&&n("p",f=void 0===g?void 0:new ut(g,i)),e.lang&&n("cls",m={cu:"slavonic",ru:"russian",en:"english"}[c]),(e.db||e.p||e.imgFlip)&&void 0!==g&&void 0!==f&&(n("icon",y=function(e,t){const n=t.saints,o=[];if(void 0!==n)for(const t of n)for(const n of e.icons(t.cid,["cu","cu/ru","el","en"]))o.push({...n,saint:t.name||{}});0===o.length&&o.push(...p);const r=Math.floor(Math.random()*o.length);return{src:"dbIcons/"+o[r].name,alt:En(o[r].saint),title:En(o[r].saint)}}(g,f)),n("imgFlip",b=!b))}),{dateFormatted:s,moveDay:l,lang:c,t:d,r:u,db:g,p:f,cls:m,icon:y,imgFlip:b,click_handler:()=>l(-1),datepicker_formattedSelected_binding:function(e){n("dateFormatted",s=e)},click_handler_1:()=>l(1),click_handler_2:()=>n("lang",c="cu"),click_handler_3:()=>n("lang",c="ru"),click_handler_4:()=>n("lang",c="en")}}return new class extends Ce{constructor(e){super(),we(this,e,Jn,Tn,c,{})}}({target:document.body})}(fs,imageSize);
//# sourceMappingURL=bundle.js.map
