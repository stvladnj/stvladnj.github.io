var app=function(t){"use strict";function n(){}const e=t=>t;function o(t){return t()}function r(){return Object.create(null)}function c(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}const i="undefined"!=typeof window;let a=i?()=>window.performance.now():()=>Date.now(),u=i?t=>requestAnimationFrame(t):n;const f=new Set;function d(t){f.forEach(n=>{n.c(t)||(f.delete(n),n.f())}),0!==f.size&&u(d)}function p(t,n){t.appendChild(n)}function h(t,n,e){t.insertBefore(n,e||null)}function g(t){t.parentNode.removeChild(t)}function m(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function y(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function b(){return v(" ")}function $(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function _(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function w(t,n){n=""+n,t.data!==n&&(t.data=n)}function x(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}function k(t,n,e){t.classList[e?"add":"remove"](n)}const j=new Set;let C,E=0;function M(t,n,e,o,r,c,s,l=0){const i=16.666/o;let a="{\n";for(let t=0;t<=1;t+=i){const o=n+(e-n)*c(t);a+=100*t+`%{${s(o,1-o)}}\n`}const u=a+`100% {${s(e,1-e)}}\n}`,f=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(u)}_${l}`,d=t.ownerDocument;j.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(y("style")).sheet),h=d.__svelte_rules||(d.__svelte_rules={});h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${f} ${o}ms linear ${r}ms 1 both`,E+=1,f}function S(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),E-=r,E||u(()=>{E||(j.forEach(t=>{const n=t.__svelte_stylesheet;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.__svelte_rules={}}),j.clear())}))}function A(t){C=t}function D(t){(function(){if(!C)throw new Error("Function called outside component initialization");return C})().$$.on_mount.push(t)}const F=[],N=[],O=[],I=[],L=Promise.resolve();let U=!1;function z(t){O.push(t)}let B=!1;const P=new Set;function R(){if(!B){B=!0;do{for(let t=0;t<F.length;t+=1){const n=F[t];A(n),T(n.$$)}for(F.length=0;N.length;)N.pop()();for(let t=0;t<O.length;t+=1){const n=O[t];P.has(n)||(P.add(n),n())}O.length=0}while(F.length);for(;I.length;)I.pop()();U=!1,B=!1,P.clear()}}function T(t){if(null!==t.fragment){t.update(),c(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(z)}}let Y;function q(t,n,e){t.dispatchEvent(function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(`${n?"intro":"outro"}${e}`))}const G=new Set;let H;function J(){H={r:0,c:[],p:H}}function K(){H.r||c(H.c),H=H.p}function Q(t,n){t&&t.i&&(G.delete(t),t.i(n))}function V(t,n,e,o){if(t&&t.o){if(G.has(t))return;G.add(t),H.c.push(()=>{G.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}const W={duration:0};function X(t,o,r,l){let i=o(t,r),p=l?0:1,h=null,g=null,m=null;function y(){m&&S(t,m)}function v(t,n){const e=t.b-p;return n*=Math.abs(e),{a:p,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function b(o){const{delay:r=0,duration:s=300,easing:l=e,tick:b=n,css:$}=i||W,_={start:a()+r,b:o};o||(_.group=H,H.r+=1),h?g=_:($&&(y(),m=M(t,p,o,s,r,l,$)),o&&b(0,1),h=v(_,s),z(()=>q(t,o,"start")),function(t){let n;0===f.size&&u(d),new Promise(e=>{f.add(n={c:t,f:e})})}(n=>{if(g&&n>g.start&&(h=v(g,s),g=null,q(t,h.b,"start"),$&&(y(),m=M(t,p,h.b,h.duration,0,l,i.css))),h)if(n>=h.end)b(p=h.b,1-p),q(t,h.b,"end"),g||(h.b?y():--h.group.r||c(h.group.c)),h=null;else if(n>=h.start){const t=n-h.start;p=h.a+h.d*l(t/h.duration),b(p,1-p)}return!(!h&&!g)}))}return{run(t){s(i)?(Y||(Y=Promise.resolve(),Y.then(()=>{Y=null})),Y).then(()=>{i=i(),b(t)}):b(t)},end(){y(),h=g=null}}}function Z(t,n){V(t,1,1,()=>{n.delete(t.key)})}function tt(t,n){-1===t.$$.dirty[0]&&(F.push(t),U||(U=!0,L.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function nt(t,e,l,i,a,u,f=[-1]){const d=C;A(t);const p=e.props||{},h=t.$$={fragment:null,ctx:null,props:u,update:n,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:r(),dirty:f};let m=!1;if(h.ctx=l?l(t,p,(n,e,...o)=>{const r=o.length?o[0]:e;return h.ctx&&a(h.ctx[n],h.ctx[n]=r)&&(h.bound[n]&&h.bound[n](r),m&&tt(t,n)),e}):[],h.update(),m=!0,c(h.before_update),h.fragment=!!i&&i(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(g)}else h.fragment&&h.fragment.c();e.intro&&Q(t.$$.fragment),function(t,n,e){const{fragment:r,on_mount:l,on_destroy:i,after_update:a}=t.$$;r&&r.m(n,e),z(()=>{const n=l.map(o).filter(s);i?i.push(...n):c(n),t.$$.on_mount=[]}),a.forEach(z)}(t,e.target,e.anchor),R()}A(d)}function et(t){const n=t-1;return n*n*n+1}function ot(t,{delay:n=0,duration:o=400,easing:r=e}){const c=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*c}}function rt(t,{delay:n=0,duration:e=400,easing:o=et,x:r=0,y:c=0,opacity:s=0}){const l=getComputedStyle(t),i=+l.opacity,a="none"===l.transform?"":l.transform,u=i*(1-s);return{delay:n,duration:e,easing:o,css:(t,n)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*r}px, ${(1-t)*c}px);\n\t\t\topacity: ${i-u*n}`}}function ct(t,n,e){const o=t.slice();return o[34]=n[e],o}function st(t,n,e){const o=t.slice();return o[37]=n[e],o}function lt(t,n,e){const o=t.slice();return o[31]=n[e],o}function it(t,n){let e,o,r,c,s;return{key:t,first:null,c(){e=y("div"),o=y("img"),o.src!==(r=n[37].image)&&_(o,"src",r),x(o,"transform","rotate("+n[37].rotate+"deg)"),_(o,"alt",""),_(o,"class","svelte-fnj9rc"),_(e,"class","candle svelte-fnj9rc"),x(e,"left",n[37].pos+"%"),x(e,"height",n[37].height),this.first=e},m(t,n){h(t,e,n),p(e,o),s=!0},p(t,n){(!s||34&n[0]&&o.src!==(r=t[37].image))&&_(o,"src",r),(!s||34&n[0])&&x(o,"transform","rotate("+t[37].rotate+"deg)"),(!s||34&n[0])&&x(e,"left",t[37].pos+"%"),(!s||34&n[0])&&x(e,"height",t[37].height)},i(t){s||(z(()=>{c||(c=X(e,rt,{y:100,duration:500},!0)),c.run(1)}),s=!0)},o(t){c||(c=X(e,rt,{y:100,duration:500},!1)),c.run(0),s=!1},d(t){t&&g(e),t&&c&&c.end()}}}function at(t){let n,e,o,r,s,l,i,a,u,f,d,m,x,k,j,C=t[34].description[t[0]]+"",E=t[34].price.toFixed(2)+"",M=t[9](t[31],t[34],t[5])+"";function S(...n){return t[28](t[31],t[34],...n)}function A(...n){return t[29](t[31],t[34],...n)}return{c(){n=y("div"),e=y("div"),o=y("div"),r=y("button"),r.textContent="-",s=b(),l=y("span"),i=v(C),a=v(": $"),u=v(E),f=v(" Ã—"),d=v(M),m=b(),x=y("button"),x.textContent="+",k=b(),_(r,"class","btn btn-default btn-circle button-left svelte-fnj9rc"),_(l,"class","descr svelte-fnj9rc"),_(x,"class","btn btn-default btn-circle button-right svelte-fnj9rc"),_(o,"class","button-row svelte-fnj9rc"),_(e,"class","col-sm-12"),_(n,"class","row")},m(t,g,y){h(t,n,g),p(n,e),p(e,o),p(o,r),p(o,s),p(o,l),p(l,i),p(l,a),p(l,u),p(l,f),p(l,d),p(o,m),p(o,x),p(n,k),y&&c(j),j=[$(r,"click",S),$(x,"click",A)]},p(n,e){t=n,5&e[0]&&C!==(C=t[34].description[t[0]]+"")&&w(i,C),4&e[0]&&E!==(E=t[34].price.toFixed(2)+"")&&w(u,E),38&e[0]&&M!==(M=t[9](t[31],t[34],t[5])+"")&&w(d,M)},d(t){t&&g(n),c(j)}}}function ut(t){let n,e,o,r,c,s,l,i,a,u,f,d,$,x=[],k=new Map,j=t[31].description[t[0]]+"",C=t[13](t[31],t[5]);const E=t=>t[37].key;for(let n=0;n<C.length;n+=1){let e=st(t,C,n),o=E(e);k.set(o,x[n]=it(o,e))}let M=t[2],S=[];for(let n=0;n<M.length;n+=1)S[n]=at(ct(t,M,n));return{c(){n=y("div"),e=y("div"),o=y("img"),c=b();for(let t=0;t<x.length;t+=1)x[t].c();s=b(),l=y("div"),i=y("div"),a=y("div"),u=v(j),f=b();for(let t=0;t<S.length;t+=1)S[t].c();d=b(),o.src!==(r=t[31].image)&&_(o,"src",r),_(o,"alt",""),_(o,"class","svelte-fnj9rc"),_(a,"class","col-md-12 icon-header svelte-fnj9rc"),_(i,"class","row"),_(l,"class","button-group svelte-fnj9rc"),_(e,"class","candle-location svelte-fnj9rc"),_(n,"class","col-md-3 col-sm-12")},m(t,r){h(t,n,r),p(n,e),p(e,o),p(e,c);for(let t=0;t<x.length;t+=1)x[t].m(e,null);p(e,s),p(e,l),p(l,i),p(i,a),p(a,u),p(l,f);for(let t=0;t<S.length;t+=1)S[t].m(l,null);p(n,d),$=!0},p(t,n){if((!$||2&n[0]&&o.src!==(r=t[31].image))&&_(o,"src",r),8226&n[0]){const o=t[13](t[31],t[5]);J(),x=function(t,n,e,o,r,c,s,l,i,a,u,f){let d=t.length,p=c.length,h=d;const g={};for(;h--;)g[t[h].key]=h;const m=[],y=new Map,v=new Map;for(h=p;h--;){const t=f(r,c,h),l=e(t);let i=s.get(l);i?o&&i.p(t,n):(i=a(l,t),i.c()),y.set(l,m[h]=i),l in g&&v.set(l,Math.abs(h-g[l]))}const b=new Set,$=new Set;function _(t){Q(t,1),t.m(l,u,s.has(t.key)),s.set(t.key,t),u=t.first,p--}for(;d&&p;){const n=m[p-1],e=t[d-1],o=n.key,r=e.key;n===e?(u=n.first,d--,p--):y.has(r)?!s.has(o)||b.has(o)?_(n):$.has(r)?d--:v.get(o)>v.get(r)?($.add(o),_(n)):(b.add(r),d--):(i(e,s),d--)}for(;d--;){const n=t[d];y.has(n.key)||i(n,s)}for(;p;)_(m[p-1]);return m}(x,n,E,1,t,o,k,e,Z,it,s,st),K()}if((!$||3&n[0])&&j!==(j=t[31].description[t[0]]+"")&&w(u,j),6695&n[0]){let e;for(M=t[2],e=0;e<M.length;e+=1){const o=ct(t,M,e);S[e]?S[e].p(o,n):(S[e]=at(o),S[e].c(),S[e].m(l,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=M.length}},i(t){if(!$){for(let t=0;t<C.length;t+=1)Q(x[t]);$=!0}},o(t){for(let t=0;t<x.length;t+=1)V(x[t]);$=!1},d(t){t&&g(n);for(let t=0;t<x.length;t+=1)x[t].d();m(S,t)}}}function ft(t){let n,e,o,r,c=t[4][t[0]]+"";return{c(){n=y("div"),e=v(c),_(n,"class","row thanks svelte-fnj9rc")},m(t,o){h(t,n,o),p(n,e),r=!0},p(t,n){(!r||17&n[0])&&c!==(c=t[4][t[0]]+"")&&w(e,c)},i(t){r||(z(()=>{o||(o=X(n,ot,{},!0)),o.run(1)}),r=!0)},o(t){o||(o=X(n,ot,{},!1)),o.run(0),r=!1},d(t){t&&g(n),t&&o&&o.end()}}}function dt(t){let n,e,o,r,s,l,i,a,u,f,d,x,j,C,E,M,S,A=t[6].toFixed(2)+"",D=t[1],F=[];for(let n=0;n<D.length;n+=1)F[n]=ut(lt(t,D,n));const N=t=>V(F[t],1,1,()=>{F[t]=null});let O=t[8]&&ft(t);return{c(){n=y("div");for(let t=0;t<F.length;t+=1)F[t].c();e=b(),o=y("div"),r=y("div"),s=b(),l=y("div"),i=v("$"),a=v(A),u=b(),f=y("div"),d=y("button"),d.innerHTML='<i class="fa fa-times"></i>',x=b(),O&&O.c(),j=b(),C=y("script"),_(n,"class","row"),_(r,"id","paypal-button-container"),_(r,"class","col-sm-6 paypal-ugly svelte-fnj9rc"),_(l,"class","amount col-sm-3 svelte-fnj9rc"),_(d,"class","btn btn-circle btn-danger cancel svelte-fnj9rc"),_(f,"class","col-sm-3"),_(o,"class","row total svelte-fnj9rc"),k(o,"flex",t[6]>0),C.src!==(E="https://www.paypal.com/sdk/js?client-id="+t[3]+"&currency=USD&disable-funding=card,credit")&&_(C,"src",E),_(C,"data-sdk-integration-source","button-factory")},m(g,m,y){h(g,n,m);for(let t=0;t<F.length;t+=1)F[t].m(n,null);t[30](n),h(g,e,m),h(g,o,m),p(o,r),p(o,s),p(o,l),p(l,i),p(l,a),p(o,u),p(o,f),p(f,d),h(g,x,m),O&&O.m(g,m),h(g,j,m),p(document.head,C),M=!0,y&&c(S),S=[$(d,"click",t[10]),$(C,"load",t[14])]},p(t,e){if(14887&e[0]){let o;for(D=t[1],o=0;o<D.length;o+=1){const r=lt(t,D,o);F[o]?(F[o].p(r,e),Q(F[o],1)):(F[o]=ut(r),F[o].c(),Q(F[o],1),F[o].m(n,null))}for(J(),o=D.length;o<F.length;o+=1)N(o);K()}(!M||64&e[0])&&A!==(A=t[6].toFixed(2)+"")&&w(a,A),64&e[0]&&k(o,"flex",t[6]>0),t[8]?O?(O.p(t,e),256&e[0]&&Q(O,1)):(O=ft(t),O.c(),Q(O,1),O.m(j.parentNode,j)):O&&(J(),V(O,1,1,()=>{O=null}),K()),(!M||8&e[0]&&C.src!==(E="https://www.paypal.com/sdk/js?client-id="+t[3]+"&currency=USD&disable-funding=card,credit"))&&_(C,"src",E)},i(t){if(!M){for(let t=0;t<D.length;t+=1)Q(F[t]);Q(O),M=!0}},o(t){F=F.filter(Boolean);for(let t=0;t<F.length;t+=1)V(F[t]);V(O),M=!1},d(r){r&&g(n),m(F,r),t[30](null),r&&g(e),r&&g(o),r&&g(x),O&&O.d(r),r&&g(j),g(C),c(S)}}}function pt(t,n,e){let{lang:o="ru"}=n,{locations:r=[]}=n,{products:c=[]}=n,{paypalClientId:s}=n,{brandName:l={}}=n,{thankYouMessage:i={}}=n,a={};const u=(t,n)=>a[t.id+"/"+n.id]||0,f=()=>{let t=0;for(const n of r)for(const e of c){t+=u(n,e)*e.price}return t};let d=0;const p=()=>{e(5,a={})},h=(t,n)=>{const o=u(t,n);o<n.limit&&(e(5,a[t.id+"/"+n.id]=o+1,a),e(5,a))},g=(t,n)=>{const o=u(t,n);o>0&&(e(5,a[t.id+"/"+n.id]=o-1,a),e(5,a))},m=t=>{for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*n),o=t[n];t[n]=t[e],t[e]=o}return t},y=c.reduce((t,n)=>t+n.limit,0),v={};function b(){for(const t of r)v[t.id]={pos:m([...Array(y).keys()]),rotation:[...Array(y).keys()].map(()=>10*Math.random()-5)}}let $,_=!1,w=!1;function x(t,n){const e=[];for(const t of r)for(const n of c){const r=u(t,n);r>0&&e.push({name:"candles",sku:n.id+"/"+t.id,unit_amount:{currency_code:"USD",value:n.price.toFixed(2)},quantity:r,description:n.description[o]+" :: "+t.description[o],category:"DIGITAL_GOODS"})}const s={amount:{currency_code:"USD",value:d.toFixed(2),breakdown:{item_total:{currency_code:"USD",value:d.toFixed(2)}}},description:"Candles",items:e};return n.order.create({purchase_units:[s],application_context:{brand_name:l[o]}})}function k(t,n){return n.order.capture().then((function(t){p(),M()}))}D(()=>{w=!0,_&&C()});const j=t=>{console.log("Cancelled:",t)};function C(){paypal.Buttons({style:{size:"responsive",shape:"pill",color:"blue",layout:"vertical",label:"paypal",tagline:!1},createOrder:x,onApprove:k,onCancel:j}).render("#paypal-button-container")}let E=!1;function M(){e(8,E=!0),setTimeout(()=>{e(8,E=!1)},2500)}return t.$set=t=>{"lang"in t&&e(0,o=t.lang),"locations"in t&&e(1,r=t.locations),"products"in t&&e(2,c=t.products),"paypalClientId"in t&&e(3,s=t.paypalClientId),"brandName"in t&&e(15,l=t.brandName),"thankYouMessage"in t&&e(4,i=t.thankYouMessage)},t.$$.update=()=>{96&t.$$.dirty[0]&&(e(6,d=f()),0===d&&b())},[o,r,c,s,i,a,d,$,E,u,p,h,g,t=>{const n=[];var e=0;for(const o of c){const r=u(t,o);for(let c=0;c<r;c++)n.push({image:o.image,pos:100*(.5+v[t.id].pos[e+c])/y,height:o.height,rotate:v[t.id].rotation[e+c],key:t.id+"/"+(e+c)});e+=o.limit}return n},function(){_=!0,w&&C()},l,v,_,w,f,m,y,b,x,k,j,C,M,(t,n)=>g(t,n),(t,n)=>h(t,n),function(t){N[t?"unshift":"push"](()=>{e(7,$=t)})}]}return t.CandleBox=class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(c(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}{constructor(t){super(),nt(this,t,pt,dt,l,{lang:0,locations:1,products:2,paypalClientId:3,brandName:15,thankYouMessage:4},[-1,-1])}},t}({});
//# sourceMappingURL=online-candle-box.js.map
