var app=function(t){"use strict";function e(){}const n=t=>t;function o(t){return t()}function l(){return Object.create(null)}function c(t){t.forEach(o)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const i="undefined"!=typeof window;let a=i?()=>window.performance.now():()=>Date.now(),u=i?t=>requestAnimationFrame(t):e;const d=new Set;function f(t){d.forEach(e=>{e.c(t)||(d.delete(e),e.f())}),0!==d.size&&u(f)}function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function $(){return v(" ")}function b(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e){(null!=e||t.value)&&(t.value=e)}function w(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function S(t,e,n){t.classList[n?"add":"remove"](e)}function q(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const M=new Set;let E,O=0;function I(t,e,n,o,l,c,s,r=0){const i=16.666/o;let a="{\n";for(let t=0;t<=1;t+=i){const o=e+(n-e)*c(t);a+=100*t+`%{${s(o,1-o)}}\n`}const u=a+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${r}`,f=t.ownerDocument;M.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(y("style")).sheet),g=f.__svelte_rules||(f.__svelte_rules={});g[d]||(g[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?h+", ":""}${d} ${o}ms linear ${l}ms 1 both`,O+=1,d}function C(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),l=n.length-o.length;l&&(t.style.animation=o.join(", "),O-=l,O||u(()=>{O||(M.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),M.clear())}))}function D(t){E=t}function F(){if(!E)throw new Error("Function called outside component initialization");return E}function N(){const t=F();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const l=q(e,n);o.slice().forEach(e=>{e.call(t,l)})}}}const j=[],A=[],L=[],T=[],z=Promise.resolve();let G=!1;function U(t){L.push(t)}function B(t){T.push(t)}let R=!1;const J=new Set;function P(){if(!R){R=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];D(e),Y(e.$$)}for(j.length=0;A.length;)A.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];J.has(e)||(J.add(e),e())}L.length=0}while(j.length);for(;T.length;)T.pop()();G=!1,R=!1,J.clear()}}function Y(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}let H;function V(t,e,n){t.dispatchEvent(q(`${e?"intro":"outro"}${n}`))}const K=new Set;let Q;function W(){Q={r:0,c:[],p:Q}}function X(){Q.r||c(Q.c),Q=Q.p}function Z(t,e){t&&t.i&&(K.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(K.has(t))return;K.add(t),Q.c.push(()=>{K.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const et={duration:0};function nt(t,o,l,r){let i=o(t,l),p=r?0:1,g=null,h=null,m=null;function y(){m&&C(t,m)}function v(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(o){const{delay:l=0,duration:s=300,easing:r=n,tick:$=e,css:b}=i||et,_={start:a()+l,b:o};o||(_.group=Q,Q.r+=1),g?h=_:(b&&(y(),m=I(t,p,o,s,l,r,b)),o&&$(0,1),g=v(_,s),U(()=>V(t,o,"start")),function(t){let e;0===d.size&&u(f),new Promise(n=>{d.add(e={c:t,f:n})})}(e=>{if(h&&e>h.start&&(g=v(h,s),h=null,V(t,g.b,"start"),b&&(y(),m=I(t,p,g.b,g.duration,0,r,i.css))),g)if(e>=g.end)$(p=g.b,1-p),V(t,g.b,"end"),h||(g.b?y():--g.group.r||c(g.group.c)),g=null;else if(e>=g.start){const t=e-g.start;p=g.a+g.d*r(t/g.duration),$(p,1-p)}return!(!g&&!h)}))}return{run(t){s(i)?(H||(H=Promise.resolve(),H.then(()=>{H=null})),H).then(()=>{i=i(),$(t)}):$(t)},end(){y(),g=h=null}}}function ot(t,e){tt(t,1,1,()=>{e.delete(t.key)})}function lt(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function ct(t){t&&t.c()}function st(t,e,n){const{fragment:l,on_mount:r,on_destroy:i,after_update:a}=t.$$;l&&l.m(e,n),U(()=>{const e=r.map(o).filter(s);i?i.push(...e):c(e),t.$$.on_mount=[]}),a.forEach(U)}function rt(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(j.push(t),G||(G=!0,z.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(t,n,o,s,r,i,a=[-1]){const u=E;D(t);const d=n.props||{},f=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:r,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:a};let p=!1;if(f.ctx=o?o(t,d,(e,n,...o)=>{const l=o.length?o[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=l)&&(f.bound[e]&&f.bound[e](l),p&&it(t,e)),n}):[],f.update(),p=!0,c(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(h)}else f.fragment&&f.fragment.c();n.intro&&Z(t.$$.fragment),st(t,n.target,n.anchor),P()}D(u)}class ut{$destroy(){rt(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function dt(t){const e=t-1;return e*e*e+1}function ft(t,{delay:e=0,duration:o=400,easing:l=n}){const c=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:l,css:t=>"opacity: "+t*c}}function pt(t,{delay:e=0,duration:n=400,easing:o=dt,x:l=0,y:c=0,opacity:s=0}){const r=getComputedStyle(t),i=+r.opacity,a="none"===r.transform?"":r.transform,u=i*(1-s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*l}px, ${(1-t)*c}px);\n\t\t\topacity: ${i-u*e}`}}function gt(t){let n,o,l,s,r,i,a,u,d,f,m,x,w,S=t[1].toFixed(2)+"";return{c(){n=y("div"),o=y("button"),o.innerHTML='<i class="fa fa-minus svelte-jq26lu"></i>',l=$(),s=y("div"),r=v(t[2]),i=v(" $"),a=v(S),u=v(" ×"),d=y("span"),f=v(t[0]),m=$(),x=y("button"),x.innerHTML='<i class="fa fa-plus svelte-jq26lu"></i>',_(o,"class","btn btn-default button-circle svelte-jq26lu"),_(d,"class","quantity svelte-jq26lu"),_(s,"class","button-title svelte-jq26lu"),_(x,"class","btn btn-default button-circle svelte-jq26lu"),_(n,"class","button-row svelte-jq26lu")},m(e,h,y){g(e,n,h),p(n,o),p(n,l),p(n,s),p(s,r),p(s,i),p(s,a),p(s,u),p(s,d),p(d,f),p(n,m),p(n,x),y&&c(w),w=[b(o,"click",t[4]),b(x,"click",t[3])]},p(t,[e]){4&e&&k(r,t[2]),2&e&&S!==(S=t[1].toFixed(2)+"")&&k(a,S),1&e&&k(f,t[0])},i:e,o:e,d(t){t&&h(n),c(w)}}}function ht(t,e,n){let{price:o=1}=e,{limit:l=5}=e,{quantity:c=0}=e,{label:s=""}=e;const r=N();return t.$set=t=>{"price"in t&&n(1,o=t.price),"limit"in t&&n(5,l=t.limit),"quantity"in t&&n(0,c=t.quantity),"label"in t&&n(2,s=t.label)},[c,o,s,()=>{c<l&&(n(0,c+=1),r("quantity"))},()=>{c>0&&(n(0,c-=1),r("quantity"))},l]}class mt extends ut{constructor(t){super(),at(this,t,ht,gt,r,{price:1,limit:5,quantity:0,label:2})}}function yt(t,e,n){const o=t.slice();return o[12]=e[n],o}function vt(t,e,n){const o=t.slice();return o[15]=e[n],o}function $t(t,e){let n,o,l,c,s;return{key:t,first:null,c(){n=y("div"),o=y("img"),o.src!==(l=e[15].image)&&_(o,"src",l),w(o,"transform","rotate("+e[15].rotate+"deg)"),_(o,"alt",""),_(o,"class","svelte-n0vah4"),_(n,"class","candle svelte-n0vah4"),w(n,"left",e[15].pos+"%"),w(n,"height",e[15].height),this.first=n},m(t,e){g(t,n,e),p(n,o),s=!0},p(t,e){(!s||1&e&&o.src!==(l=t[15].image))&&_(o,"src",l),(!s||1&e)&&w(o,"transform","rotate("+t[15].rotate+"deg)"),(!s||1&e)&&w(n,"left",t[15].pos+"%"),(!s||1&e)&&w(n,"height",t[15].height)},i(t){s||(U(()=>{c||(c=nt(n,pt,{y:120,duration:600},!0)),c.run(1)}),s=!0)},o(t){c||(c=nt(n,pt,{y:120,duration:600},!1)),c.run(0),s=!1},d(t){t&&h(n),t&&c&&c.end()}}}function bt(t){let e,n;function o(e){t[10].call(null,e,t[12])}let l={label:t[12].description[t[4]],price:t[12].price,limit:t[12].limit};void 0!==t[0][t[12].id]&&(l.quantity=t[0][t[12].id]);const c=new mt({props:l});return A.push(()=>lt(c,"quantity",o)),c.$on("quantity",t[11]),{c(){ct(c.$$.fragment)},m(t,e){st(c,t,e),n=!0},p(n,o){t=n;const l={};24&o&&(l.label=t[12].description[t[4]]),8&o&&(l.price=t[12].price),8&o&&(l.limit=t[12].limit),!e&&9&o&&(e=!0,l.quantity=t[0][t[12].id],B(()=>e=!1)),c.$set(l)},i(t){n||(Z(c.$$.fragment,t),n=!0)},o(t){tt(c.$$.fragment,t),n=!1},d(t){rt(c,t)}}}function _t(t){let e,n,o,l,c,s,r,i,a,u,d=[],f=new Map,b=t[2][t[4]]+"",x=t[5](t[0]);const w=t=>t[15].key;for(let e=0;e<x.length;e+=1){let n=vt(t,x,e),o=w(n);f.set(o,d[e]=$t(o,n))}let S=t[3],q=[];for(let e=0;e<S.length;e+=1)q[e]=bt(yt(t,S,e));const M=t=>tt(q[t],1,1,()=>{q[t]=null});return{c(){e=y("div"),n=y("img"),l=$();for(let t=0;t<d.length;t+=1)d[t].c();c=$(),s=y("div"),r=y("div"),i=v(b),a=$();for(let t=0;t<q.length;t+=1)q[t].c();n.src!==(o=t[1])&&_(n,"src",o),_(n,"alt",""),_(n,"class","svelte-n0vah4"),_(r,"class","button-title svelte-n0vah4"),_(s,"class","buttons svelte-n0vah4"),_(e,"class","icon svelte-n0vah4")},m(t,o){g(t,e,o),p(e,n),p(e,l);for(let t=0;t<d.length;t+=1)d[t].m(e,null);p(e,c),p(e,s),p(s,r),p(r,i),p(s,a);for(let t=0;t<q.length;t+=1)q[t].m(s,null);u=!0},p(t,[l]){if((!u||2&l&&n.src!==(o=t[1]))&&_(n,"src",o),33&l){const n=t[5](t[0]);W(),d=function(t,e,n,o,l,c,s,r,i,a,u,d){let f=t.length,p=c.length,g=f;const h={};for(;g--;)h[t[g].key]=g;const m=[],y=new Map,v=new Map;for(g=p;g--;){const t=d(l,c,g),r=n(t);let i=s.get(r);i?o&&i.p(t,e):(i=a(r,t),i.c()),y.set(r,m[g]=i),r in h&&v.set(r,Math.abs(g-h[r]))}const $=new Set,b=new Set;function _(t){Z(t,1),t.m(r,u,s.has(t.key)),s.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=m[p-1],n=t[f-1],o=e.key,l=n.key;e===n?(u=e.first,f--,p--):y.has(l)?!s.has(o)||$.has(o)?_(e):b.has(l)?f--:v.get(o)>v.get(l)?(b.add(o),_(e)):($.add(l),f--):(i(n,s),f--)}for(;f--;){const e=t[f];y.has(e.key)||i(e,s)}for(;p;)_(m[p-1]);return m}(d,l,w,1,t,n,f,e,ot,$t,c,vt),X()}if((!u||20&l)&&b!==(b=t[2][t[4]]+"")&&k(i,b),25&l){let e;for(S=t[3],e=0;e<S.length;e+=1){const n=yt(t,S,e);q[e]?(q[e].p(n,l),Z(q[e],1)):(q[e]=bt(n),q[e].c(),Z(q[e],1),q[e].m(s,null))}for(W(),e=S.length;e<q.length;e+=1)M(e);X()}},i(t){if(!u){for(let t=0;t<x.length;t+=1)Z(d[t]);for(let t=0;t<S.length;t+=1)Z(q[t]);u=!0}},o(t){for(let t=0;t<d.length;t+=1)tt(d[t]);q=q.filter(Boolean);for(let t=0;t<q.length;t+=1)tt(q[t]);u=!1},d(t){t&&h(e);for(let t=0;t<d.length;t+=1)d[t].d();m(q,t)}}}function kt(t,e,n){let{src:o="icon_theotokos.png"}=e,{name:l="Icon of Theotokos"}=e,{candles:c=[]}=e,{lang:s="en"}=e,{order:r={}}=e;const i=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*e),o=t[e];t[e]=t[n],t[n]=o}return t},a=c.reduce((t,e)=>t+e.limit,0),u={};function d(){u.pos=i([...Array(a).keys()]),u.rotation=[...Array(a).keys()].map(()=>10*Math.random()-5)}d();return t.$set=t=>{"src"in t&&n(1,o=t.src),"name"in t&&n(2,l=t.name),"candles"in t&&n(3,c=t.candles),"lang"in t&&n(4,s=t.lang),"order"in t&&n(0,r=t.order)},[r,o,l,c,s,t=>{const e=[];var n=0;for(const o of c){for(let l=0;l<t[o.id];l++)e.push({image:o.image,pos:100*(.25+u.pos[n+l])/a,height:o.height,rotate:u.rotation[n+l],key:n+l});n+=o.limit}return 0===e.length&&d(),e},u,i,a,d,function(t,e){r[e.id]=t,n(0,r)},function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}]}class xt extends ut{constructor(t){super(),at(this,t,kt,_t,r,{src:1,name:2,candles:3,lang:4,order:0})}}function wt(t){let n,o,l,c,s,r,i,a;return{c(){n=y("label"),o=y("input"),l=$(),c=y("span"),s=$(),r=y("span"),i=v(t[1]),_(o,"type","checkbox"),_(o,"class","svelte-52zyub"),_(c,"class","slider svelte-52zyub"),w(c,"background-color",t[0]?t[2]:"#ccc"),_(n,"class","switch svelte-52zyub"),_(r,"class","label svelte-52zyub"),w(r,"color",t[2])},m(e,u,d){g(e,n,u),p(n,o),o.checked=t[0],p(n,l),p(n,c),g(e,s,u),g(e,r,u),p(r,i),d&&a(),a=b(o,"change",t[3])},p(t,[e]){1&e&&(o.checked=t[0]),5&e&&w(c,"background-color",t[0]?t[2]:"#ccc"),2&e&&k(i,t[1]),4&e&&w(r,"color",t[2])},i:e,o:e,d(t){t&&h(n),t&&h(s),t&&h(r),a()}}}function St(t,e,n){let{checked:o=!1}=e,{label:l=""}=e,{color:c="#2196F3"}=e;return t.$set=t=>{"checked"in t&&n(0,o=t.checked),"label"in t&&n(1,l=t.label),"color"in t&&n(2,c=t.color)},[o,l,c,function(){o=this.checked,n(0,o)}]}class qt extends ut{constructor(t){super(),at(this,t,St,wt,r,{checked:0,label:1,color:2})}}function Mt(t){let e,n;return{c(){e=y("img"),e.src!==(n="/img/note-black.png")&&_(e,"src","/img/note-black.png"),_(e,"alt",""),_(e,"class","svelte-xnito")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function Et(t){let e,n;return{c(){e=y("img"),e.src!==(n="/img/note-red.png")&&_(e,"src","/img/note-red.png"),_(e,"alt",""),_(e,"class","svelte-xnito")},m(t,n){g(t,e,n)},d(t){t&&h(e)}}}function Ot(t){let e,n,o,l,c,s,r,i,a,u,d,f,m,S,q,M=(t[1]?t[0].length:"")+"";function E(t,e){return t[3]?Et:Mt}let O=E(t),I=O(t);function C(e){t[11].call(null,e)}let D={label:t[3]?t[6][t[2]]:t[7][t[2]],color:t[3]?"#c36266":"gray"};void 0!==t[1]&&(D.checked=t[1]);const F=new qt({props:D});return A.push(()=>lt(F,"checked",C)),{c(){e=y("link"),n=$(),o=y("div"),I.c(),l=$(),c=y("div"),ct(F.$$.fragment),r=$(),i=y("span"),a=v(M),u=$(),d=y("textarea"),_(e,"rel","stylesheet"),_(e,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),_(i,"class","number-of-names svelte-xnito"),w(i,"color",t[3]?"#c36266":"gray"),_(c,"class","input-group title custom-control custom-switch svelte-xnito"),_(d,"class","notes svelte-xnito"),_(d,"rows","12"),d.readOnly=f=!t[1],_(d,"placeholder",m=t[1]?"":t[5][t[2]]),_(o,"class","note svelte-xnito")},m(s,f,h){p(document.head,e),g(s,n,f),g(s,o,f),I.m(o,null),p(o,l),p(o,c),st(F,c,null),p(c,r),p(c,i),p(i,a),p(o,u),p(o,d),x(d,t[4]),S=!0,h&&q(),q=b(d,"input",t[12])},p(t,[e]){O!==(O=E(t))&&(I.d(1),I=O(t),I&&(I.c(),I.m(o,l)));const n={};12&e&&(n.label=t[3]?t[6][t[2]]:t[7][t[2]]),8&e&&(n.color=t[3]?"#c36266":"gray"),!s&&2&e&&(s=!0,n.checked=t[1],B(()=>s=!1)),F.$set(n),(!S||3&e)&&M!==(M=(t[1]?t[0].length:"")+"")&&k(a,M),(!S||8&e)&&w(i,"color",t[3]?"#c36266":"gray"),(!S||2&e&&f!==(f=!t[1]))&&(d.readOnly=f),(!S||6&e&&m!==(m=t[1]?"":t[5][t[2]]))&&_(d,"placeholder",m),16&e&&x(d,t[4])},i(t){S||(Z(F.$$.fragment,t),S=!0)},o(t){tt(F.$$.fragment,t),S=!1},d(t){h(e),t&&h(n),t&&h(o),I.d(),rt(F),q()}}}function It(t,e,n){let{names:o=[]}=e,{lang:l="en"}=e,{active:c=!1}=e,{living:s=!0}=e;const r=N();let i="",a=o.join("\n"),u=c;return t.$set=t=>{"names"in t&&n(0,o=t.names),"lang"in t&&n(2,l=t.lang),"active"in t&&n(1,c=t.active),"living"in t&&n(3,s=t.living)},t.$$.update=()=>{786&t.$$.dirty&&u!==c&&(c?n(4,i=a):(n(8,a=i),n(4,i="")),n(9,u=c),r("names")),18&t.$$.dirty&&c&&(n(8,a=i),n(0,o=i.split("\n").map(t=>t.trim()).filter(t=>!!t)),r("names"))},[o,c,l,s,i,{ru:"Включите  ⇧  эту кнопку и введите имена крещёных православных христиан.",en:"Toggle  ⇧  this switch and enter names of baptised orthodox christians."},{ru:"О ЗДРАВИИ",en:"FOR LIVING"},{ru:"О УПОКОЕНИИ",en:"FOR DECEASED"},a,u,r,function(t){c=t,n(1,c)},function(){i=this.value,n(4,i),n(9,u),n(1,c),n(8,a)}]}class Ct extends ut{constructor(t){super(),at(this,t,It,Ot,r,{names:0,lang:2,active:1,living:3})}}function Dt(t,e,n){const o=t.slice();return o[33]=e[n],o}function Ft(t,e,n){const o=t.slice();return o[30]=e[n],o}function Nt(t){let e,n;const o=new xt({props:{candles:t[2],src:t[33].image,order:t[0][t[33].id],name:t[33].description,lang:t[1]}});return o.$on("quantity",t[12]),{c(){e=y("div"),ct(o.$$.fragment),_(e,"class","col-md-4 spaced svelte-odx5so")},m(t,l){g(t,e,l),st(o,e,null),n=!0},p(t,e){const n={};4&e[0]&&(n.candles=t[2]),1&e[0]&&(n.order=t[0][t[33].id]),2&e[0]&&(n.lang=t[1]),o.$set(n)},i(t){n||(Z(o.$$.fragment,t),n=!0)},o(t){tt(o.$$.fragment,t),n=!1},d(t){t&&h(e),rt(o)}}}function jt(t){let e,n,o=t[30],l=[];for(let e=0;e<o.length;e+=1)l[e]=Nt(Dt(t,o,e));const c=t=>tt(l[t],1,1,()=>{l[t]=null});return{c(){e=y("div");for(let t=0;t<l.length;t+=1)l[t].c();_(e,"class","row")},m(t,o){g(t,e,o);for(let t=0;t<l.length;t+=1)l[t].m(e,null);n=!0},p(t,n){if(20487&n[0]){let s;for(o=t[30],s=0;s<o.length;s+=1){const c=Dt(t,o,s);l[s]?(l[s].p(c,n),Z(l[s],1)):(l[s]=Nt(c),l[s].c(),Z(l[s],1),l[s].m(e,null))}for(W(),s=o.length;s<l.length;s+=1)c(s);X()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)Z(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)tt(l[t]);n=!1},d(t){t&&h(e),m(l,t)}}}function At(t){let e,n,o,l,c=t[4][t[1]]+"";return{c(){e=y("div"),n=v(c),_(e,"class","row thanks svelte-odx5so")},m(t,o){g(t,e,o),p(e,n),l=!0},p(t,e){(!l||18&e[0])&&c!==(c=t[4][t[1]]+"")&&k(n,c)},i(t){l||(U(()=>{o||(o=nt(e,ft,{},!0)),o.run(1)}),l=!0)},o(t){o||(o=nt(e,ft,{},!1)),o.run(0),l=!1},d(t){t&&h(e),t&&o&&o.end()}}}function Lt(t){let e,n,o,l,s,r,i,a,u,d,f,x,w,q,M,E,O,I,C,D,F,N,j,L,T,z=t[5].toFixed(2)+"",G=t[14],U=[];for(let e=0;e<G.length;e+=1)U[e]=jt(Ft(t,G,e));const R=t=>tt(U[t],1,1,()=>{U[t]=null});function J(e){t[26].call(null,e)}function P(e){t[27].call(null,e)}let Y={lang:t[1]};void 0!==t[6]&&(Y.names=t[6]),void 0!==t[7]&&(Y.active=t[7]);const H=new Ct({props:Y});function V(e){t[28].call(null,e)}function K(e){t[29].call(null,e)}A.push(()=>lt(H,"names",J)),A.push(()=>lt(H,"active",P)),H.$on("names",t[12]);let Q={living:!1,lang:t[1]};void 0!==t[8]&&(Q.names=t[8]),void 0!==t[9]&&(Q.active=t[9]);const et=new Ct({props:Q});A.push(()=>lt(et,"names",V)),A.push(()=>lt(et,"active",K)),et.$on("names",t[12]);let nt=t[10]&&At(t);return{c(){for(let t=0;t<U.length;t+=1)U[t].c();e=$(),n=y("div"),o=y("div"),ct(H.$$.fragment),r=$(),i=y("div"),ct(et.$$.fragment),d=$(),f=y("div"),x=y("div"),w=$(),q=y("div"),M=y("span"),E=v("$"),O=v(z),I=$(),C=y("button"),C.innerHTML='<i class="fa fa-times"></i>',D=$(),nt&&nt.c(),F=$(),N=y("script"),_(o,"class","col-md-4 col-md-offset-2 spaced svelte-odx5so"),_(i,"class","col-md-4 spaced svelte-odx5so"),_(n,"class","row"),_(x,"id","paypal-button-container"),_(x,"class","paypal-ugly svelte-odx5so"),_(M,"class","number svelte-odx5so"),_(C,"class","btn btn-circle btn-danger cancel svelte-odx5so"),_(q,"class","amount svelte-odx5so"),_(f,"class","total svelte-odx5so"),S(f,"visible",t[5]>0),N.src!==(j="https://www.paypal.com/sdk/js?client-id="+t[3]+"&currency=USD&disable-funding=card,credit")&&_(N,"src",j),_(N,"data-sdk-integration-source","button-factory")},m(l,s,a){for(let t=0;t<U.length;t+=1)U[t].m(l,s);g(l,e,s),g(l,n,s),p(n,o),st(H,o,null),p(n,r),p(n,i),st(et,i,null),g(l,d,s),g(l,f,s),p(f,x),p(f,w),p(f,q),p(q,M),p(M,E),p(M,O),p(q,I),p(q,C),g(l,D,s),nt&&nt.m(l,s),g(l,F,s),p(document.head,N),L=!0,a&&c(T),T=[b(C,"click",t[11]),b(N,"load",t[13])]},p(t,n){if(20487&n[0]){let o;for(G=t[14],o=0;o<G.length;o+=1){const l=Ft(t,G,o);U[o]?(U[o].p(l,n),Z(U[o],1)):(U[o]=jt(l),U[o].c(),Z(U[o],1),U[o].m(e.parentNode,e))}for(W(),o=G.length;o<U.length;o+=1)R(o);X()}const o={};2&n[0]&&(o.lang=t[1]),!l&&64&n[0]&&(l=!0,o.names=t[6],B(()=>l=!1)),!s&&128&n[0]&&(s=!0,o.active=t[7],B(()=>s=!1)),H.$set(o);const c={};2&n[0]&&(c.lang=t[1]),!a&&256&n[0]&&(a=!0,c.names=t[8],B(()=>a=!1)),!u&&512&n[0]&&(u=!0,c.active=t[9],B(()=>u=!1)),et.$set(c),(!L||32&n[0])&&z!==(z=t[5].toFixed(2)+"")&&k(O,z),32&n[0]&&S(f,"visible",t[5]>0),t[10]?nt?(nt.p(t,n),1024&n[0]&&Z(nt,1)):(nt=At(t),nt.c(),Z(nt,1),nt.m(F.parentNode,F)):nt&&(W(),tt(nt,1,1,()=>{nt=null}),X()),(!L||8&n[0]&&N.src!==(j="https://www.paypal.com/sdk/js?client-id="+t[3]+"&currency=USD&disable-funding=card,credit"))&&_(N,"src",j)},i(t){if(!L){for(let t=0;t<G.length;t+=1)Z(U[t]);Z(H.$$.fragment,t),Z(et.$$.fragment,t),Z(nt),L=!0}},o(t){U=U.filter(Boolean);for(let t=0;t<U.length;t+=1)tt(U[t]);tt(H.$$.fragment,t),tt(et.$$.fragment,t),tt(nt),L=!1},d(t){m(U,t),t&&h(e),t&&h(n),rt(H),rt(et),t&&h(d),t&&h(f),t&&h(D),nt&&nt.d(t),t&&h(F),h(N),c(T)}}}function Tt(t,e,n){let{lang:o="en"}=e,{locations:l=[]}=e,{candles:c=[]}=e,{paypalClientId:s}=e,{brandName:r={}}=e,{thankYouMessage:i={}}=e,{order:a={}}=e;const u=()=>{for(const t of l){n(0,a[t.id]={},a);for(const e of c)n(0,a[t.id][e.id]=0,a)}n(7,h=!1),n(9,y=!1),v()},d=(t,e)=>a[t.id][e.id]||0,f=()=>{let t=0;for(const e of l)for(const n of c){t+=d(e,n)*n.price}return t+(h?Math.floor((g.length+7)/8):0)+(y?Math.floor((m.length+7)/8):0)};let p=0,g=[];try{g=JSON.parse(localStorage.getItem("names-living")||"[]")}catch{}let h=!1,m=[];try{m=JSON.parse(localStorage.getItem("names-deceased")||"[]")}catch{}let y=!1;function v(){console.log("quantity changed:",a),n(5,p=f())}let $=!1,b=!1;var _;function k(t,e){const n=[];for(const t of l)for(const e of c){const l=d(t,e);l>0&&n.push({name:"candles",sku:e.id+"/"+t.id,unit_amount:{currency_code:"USD",value:e.price.toFixed(2)},quantity:l,description:e.description[o]+" :: "+e.description[o],category:"DIGITAL_GOODS"})}if(h&&g.length>0){localStorage.setItem("names-living",JSON.stringify(g));let t=Math.floor((g.length+7)/8);for(const e of g)n.push({name:"names",sku:"names/living",unit_amount:{currency_code:"USD",value:t.toFixed(2)},quantity:1,description:e,category:"DIGITAL_GOODS"}),t=0}if(y&&m.length>0){localStorage.setItem("names-deceased",JSON.stringify(m));let t=Math.floor((m.length+7)/8);for(const e of m)n.push({name:"names",sku:"names/deceased",unit_amount:{currency_code:"USD",value:t.toFixed(2)},quantity:1,description:e,category:"DIGITAL_GOODS"}),t=0}const s={amount:{currency_code:"USD",value:p.toFixed(2),breakdown:{item_total:{currency_code:"USD",value:p.toFixed(2)}}},description:"Candles",items:n};return console.log(s),e.order.create({purchase_units:[s],application_context:{brand_name:r[o]}})}function x(t,e){return e.order.capture().then((function(t){u(),M()}))}_=()=>{b=!0,$&&S()},F().$$.on_mount.push(_);const w=t=>{console.log("Cancelled:",t)};function S(){paypal.Buttons({style:{size:"responsive",shape:"pill",color:"blue",layout:"vertical",label:"paypal",tagline:!1},createOrder:k,onApprove:x,onCancel:w}).render("#paypal-button-container")}let q=!1;function M(){n(10,q=!0),setTimeout(()=>{n(10,q=!1)},2500)}u();const E=[l.slice(0,3),l.slice(3)];return t.$set=t=>{"lang"in t&&n(1,o=t.lang),"locations"in t&&n(15,l=t.locations),"candles"in t&&n(2,c=t.candles),"paypalClientId"in t&&n(3,s=t.paypalClientId),"brandName"in t&&n(16,r=t.brandName),"thankYouMessage"in t&&n(4,i=t.thankYouMessage),"order"in t&&n(0,a=t.order)},[a,o,c,s,i,p,g,h,m,y,q,u,v,function(){$=!0,b&&S()},E,l,r,$,b,d,f,k,x,w,S,M,function(t){g=t,n(6,g)},function(t){h=t,n(7,h)},function(t){m=t,n(8,m)},function(t){y=t,n(9,y)}]}return t.CandleBox=class extends ut{constructor(t){super(),at(this,t,Tt,Lt,r,{lang:1,locations:15,candles:2,paypalClientId:3,brandName:16,thankYouMessage:4,order:0},[-1,-1])}},t}({});
//# sourceMappingURL=online-candle-box.js.map
